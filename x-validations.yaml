x-validations:
  _TESTS_:
    search:
      - _NAME_: SEARCH_CONTEXT
        action:
          - search
        domain:
          - ONDC:TRV12
        version:
          - 2.0.0
        _RETURN_: &ref_147
          - _NAME_: CONTEXT_REQUIRED
            _RETURN_:
              - _NAME_: REQUIRED_CONTEXT_LOCATION_COUNTRY_CODE
                attr: $.context.location.country.code
                _RETURN_: attr are present
              - _NAME_: REQUIRED_CONTEXT_LOCATION_CITY_CODE
                attr: $.context.location.city.code
                _RETURN_: attr are present
              - _NAME_: REQUIRED_CONTEXT_DOMAIN
                attr: $.context.domain
                _RETURN_: attr are present
              - _NAME_: REQUIRED_CONTEXT_TIMESTAMP
                attr: $.context.timestamp
                _RETURN_: attr are present
              - _NAME_: REQUIRED_CONTEXT_BAP_ID
                attr: $.context.bap_id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_CONTEXT_BAP_URI
                attr: $.context.bap_uri
                _RETURN_: attr are present
              - _NAME_: REQUIRED_CONTEXT_BPP_ID
                attr: $.context.bpp_id
                var_search:
                  - search
                _CONTINUE_: (action all in var_search)
                _RETURN_: attr are present
              - _NAME_: REQUIRED_CONTEXT_BPP_URI
                attr: $.context.bpp_uri
                var_search:
                  - search
                _CONTINUE_: (action all in var_search)
                _RETURN_: attr are present
              - _NAME_: REQUIRED_CONTEXT_TRANSACTION_ID
                attr: $.context.transaction_id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_CONTEXT_MESSAGE_ID
                attr: $.context.message_id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_CONTEXT_VERSION
                attr: $.context.version
                _RETURN_: attr are present
              - _NAME_: REQUIRED_CONTEXT_TTL
                attr: $.context.ttl
                _RETURN_: attr are present
          - _NAME_: CONTEXT_ENUM
            _RETURN_:
              - _NAME_: VALID_CONTEXT_LOCATION_COUNTRY_CODE
                attr: $.context.location.country.code
                _CONTINUE_: '!(attr are present)'
                enumList:
                  - IND
                _RETURN_: attr any in enumList
              - _NAME_: VALID_CONTEXT_DOMAIN
                attr: $.context.domain
                enumList:
                  - ONDC:TRV12
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr all in enumList
          - _NAME_: CONTEXT_REGEX
            _RETURN_:
              - _NAME_: REGEX_CONTEXT_LOCATION_CITY_CODE
                attr: $.context.location.city.code
                reg:
                  - (\\*)|(^std\\:[0-9]{2,4}$)
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr follow regex reg
              - _NAME_: REGEX_CONTEXT_TIMESTAMP
                attr: $.context.timestamp
                reg:
                  - ^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\.\\d{3}Z$
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr follow regex reg
              - _NAME_: REGEX_CONTEXT_BAP_ID
                attr: $.context.bap_id
                reg:
                  - >-
                    ^(?!.*\b(?:http|https|www)\b)[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)+$
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr follow regex reg
              - _NAME_: REGEX_CONTEXT_BAP_URI
                attr: $.context.bap_uri
                reg:
                  - ^https:\/\/(www\.)?[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)+$
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr follow regex reg
              - _NAME_: REQUIRED_CONTEXT_TTL
                attr: $.context.ttl
                reg:
                  - >-
                    ^P(?=\\d|T\\d)(\\d+Y)?(\\d+M)?(\\d+D)?(T(\\d+H)?(\\d+M)?(\\d+S)?)?$
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr follow regex reg
      - _NAME_: SEARCH_INTENT
        action:
          - search
        _RETURN_:
          - _NAME_: REQUIRED_CATEGORY_CODE
            attr: $.message.intent.category.descriptor.code
            _RETURN_: attr are present
          - _NAME_: VALID_ENUM_CATEGORY_CODE
            attr: $.message.intent.category.descriptor.code
            enumList:
              - ECONOMY
              - PREMIUM_ECONOMY
              - BUSINESS
              - FIRST_CLASS
            _CONTINUE_: '!(attr are present)'
            _RETURN_: attr all in enumList
      - _NAME_: SEARCH_FULFILMENT
        action:
          - search
        _RETURN_:
          - _NAME_: SEARCH_REQUIRED_FULFILLMENTS
            _RETURN_:
              - _NAME_: REQUIRED_FULFILMENT_STOP_TYPE
                attr: $.message.intent.fulfillment.stops[*].type
                _RETURN_: attr are present
              - _NAME_: REQUIRED_FULFILMENT_LOCATION_CODE
                attr: $.message.intent.fulfillment.stops[*].location.descriptor.code
                _RETURN_: attr are present
              - _NAME_: REQUIRED_FULFILMENT_STOPS_TIME
                attr: $.message.intent.fulfillment.stops[*].time.timestamp
                _RETURN_: attr are present
              - _NAME_: REQUIRED_FULFILMENT_STOPS_LABEL
                attr: $.message.intent.fulfillment.stops[*].time.label
                _RETURN_: attr are present
              - _NAME_: REQUIRED_FULFILMENT_CATEGORY
                attr: $.message.intent.fulfillment.vehicle.category
                enumList:
                  - AIRLINE
                _RETURN_: attr are present && attr all in enumList
          - _NAME_: VALID_ENUM_FULFILLMENTS
            _RETURN_:
              - _NAME_: ENUM_FULFILMENT_STOP_TYPE
                attr: $.message.intent.fulfillment.stops[*].type
                enumList:
                  - START
                  - END
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr all in enumList
              - _NAME_: ENUM_FULFILMENT_STOPS_TIME
                attr: $.message.intent.fulfillment.stops[*].time.timestamp
                reg:
                  - ^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\.\\d{3}Z$
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr follow regex reg
              
      - _NAME_: SEARCH_PROVIDER
        action:
          - search
        _RETURN_:
          - _NAME_: REQUIRED_PROVIDER_ITEMS
            _RETURN_:
              - _NAME_: REQUIRED_ITEM_CODE
                attr: $.message.intent.provider.items[*].descriptor.code
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ITEM_NAME
                attr: $.message.intent.provider.items[*].descriptor.name
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ITEM_QUANTITY
                attr: $.message.intent.provider.items[*].quantity.selected.count
                _RETURN_: attr are present
          - _NAME_: VALID_ENUM_PROVIDER_ITEMS
            _RETURN_:
              - _NAME_: VALID_ENUM_ITEM_CODE
                attr: $.message.intent.provider.items[*].descriptor.code
                enumList:
                  - ADULT_TICKET
                  - CHILD_TICKET
                  - INFANT_TICKET
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr all in enumList
      - _NAME_: SEARCH_PAYMENT
        action:
          - search
        _RETURN_:
          - _NAME_: PAYMENT_TAG_GROUP
            validTags:
              - BUYER_FINDER_FEES
              - SETTLEMENT_TERMS
            tagPath: $.message.intent.payment.tags[*].descriptor.code
            _RETURN_: tagPath all in validTags
          - _NAME_: REQUIRED_PAYMENT_TAG_BUYER_FINDER_FEES
            _SCOPE_: >-
              $.message.intent.payment.tags[?(@.descriptor.code=='BUYER_FINDER_FEES')]
            subTags: $.list[*].descriptor.code
            validValues:
              - BUYER_FINDER_FEES_PERCENTAGE
            _CONTINUE_: '!(subTags are present)'
            _RETURN_: subTags all in validValues
          - _NAME_: REQUIRED_PAYMENT_TAG_SETTLEMENT_TERMS
            _SCOPE_: >-
              $.message.intent.payment.tags[?(@.descriptor.code=='SETTLEMENT_TERMS')]
            subTags: $.list[*].descriptor.code
            validValues:
              - DELAY_INTEREST
              - STATIC_TERMS
            _CONTINUE_: '!(subTags are present)'
            _RETURN_: subTags all in validValues
    on_search:
      - _NAME_: ON_SEARCH_CONTEXT
        action:
          - on_search
        domain:
          - ONDC:TRV12
        version:
          - 2.0.0
        _RETURN_: *ref_147
      - _NAME_: ON_SEARCH_CATALOG
        action:
          - on_search
        _RETURN_:
          - _NAME_: REQUIRED_MESSAGE_CATALOG_NAME
            attr: $.message.catalog.descriptor.name
            _RETURN_: attr are present
          - _NAME_: REQUIRED_MESSAGE_CATALOG_IMAGES
            attr: $.message.catalog.descriptor.images[*].url
            reg:
              - ^https:\/\/[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}(\/.*)?$
            _CONTINUE_: '!(attr are present)'
            _RETURN_: attr follow regex reg
          - _NAME_: REQUIRED_MESSAGE_CATALOG_IMAGES_SIZE
            attr: $.message.catalog.descriptor.images[*].size_type
            enumList:
              - xs
              - sm
              - md
              - lg
              - xl
              - custom
            _CONTINUE_: '!(attr are present)'
            _RETURN_: attr all in enumList
      - _NAME_: ON_SEARCH_PROVIDER
        action:
          - on_search
        domain:
          - ONDC:TRV12
        _RETURN_:
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ID
            attr: $.message.catalog.providers[*].id
            _RETURN_: attr are present
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_DESCRIPTOR
            attr: $.message.catalog.providers[*].descriptor.name
            _RETURN_: attr are present
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_CATRGORY_ID
            attr: $.message.catalog.providers[*].categories[*].id
            _RETURN_: attr are present
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_CATRGORY
            attr: $.message.catalog.providers[*].categories[*].descriptor.name
            _RETURN_: attr are present
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_CATRGORY_CODE
            attr: $.message.catalog.providers[*].categories[*].descriptor.code
            _RETURN_: attr are present
          - _NAME_: VALID_ENUM_PROVIDERS_CATRGORY_CODE
            attr: $.message.catalog.providers[*].categories[*].descriptor.code
            enumList:
              - ECONOMY
              - PREMIUM_ECONOMY
              - BUSINESS
              - FIRST_CLASS
            _CONTINUE_: '!(attr are present)'
            _RETURN_: attr all in enumList
      - _NAME_: ON_SEARCH_ITEMS
        action:
          - on_search
        _RETURN_:
          - _NAME_: REQUIRED_ITEMS
            _RETURN_:
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEMS_ID
                attr: $.message.catalog.providers[*].items[*].id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEMS_CODE
                attr: $.message.catalog.providers[*].items[*].descriptor.code
                _RETURN_:  attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEMS_NAME
                attr: $.message.catalog.providers[*].items[*].descriptor.name
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_QUANTITY
                attr: >-
                  $.message.catalog.providers[*].items[*].quantity.selected.count
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_CATEGORY
                attr: $.message.catalog.providers[*].items[*].category_ids[*]
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_TIME_LABEL
                attr: $.message.catalog.providers[*].items[*].time.label
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_TIME_DURATION
                attr: $.message.catalog.providers[*].items[*].time.duration
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_REFUND_TERMS
                attr: >-
                  $.message.catalog.providers[*].items[*].refund_terms[*].refund_eligible
                _RETURN_: attr are present
              - _NAME_: VALID_MESSAGE_PROVIDERS_ITEMS_CATEGORIES
                attr: $.message.catalog.providers[*].items[*].category_ids[*]
                usecasepath: $.message.catalog.providers[*].categories[*].id
                _RETURN_: attr all in usecasepath
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_CANCELLATION_TERMS_URL
                attr: >-
                  $.message.catalog.providers[*].items[*].cancellation_terms[*].external_ref.url
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_CANCELLATION_TERMS_MIMETYPE
                attr: >-
                  $.message.catalog.providers[*].items[*].cancellation_terms[*].external_ref.mimetype
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_TAG_GROUP
                validTags:
                  - FARE_TYPE
                  - GENERAL_INFO
                tagPath: >-
                  $.message.catalog.providers[*].items[*].tags[*].descriptor.code
                _RETURN_: tagPath any in validTags
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_FARE_TYPE
                _SCOPE_: >-
                  $.message.catalog.providers[*].items[*].tags[?(@.descriptor.code=='FARE_TYPE')]
                subTags: $.list[*].descriptor.code
                validValues:
                  - REGULAR
                  - STUDENT
                  - SENIOR_CITIZEN
                  - ARMED_FORCES
                  - DOCTORS_NURSES
                _CONTINUE_: '!(subTags are present)'
                _RETURN_: subTags all in validValues
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_GENERAL_INFO
                _SCOPE_: >-
                  $.message.catalog.providers[*].items[*].tags[?(@.descriptor.code=='GENERAL_INFO')]
                subTags: $.list[*].descriptor.code
                validValues:
                  - CABIN_BAGGAGE
                  - CHECK_IN_BAGGAGE
                  - PROHIBITED_ITEMS
                _CONTINUE_: '!(subTags are present)'
                _RETURN_: subTags all in validValues
          - _NAME_: VALID_ENUM_ITEMS
            _RETURN_:
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEMS_CODE
                attr: $.message.catalog.providers[*].items[*].descriptor.code
                enumList:
                  - ADULT_TICKET
                  - CHILD_TICKET
                  - INFANT_TICKET
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr all in enumList
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_TIME_LABEL
                attr: $.message.catalog.providers[*].items[*].time.label
                enumList:
                  - JOURNEY_TIME
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr all in enumList
      - _NAME_: ON_SEARCH_ITEMS_PAGE_1
        _SCOPE_: $.message.catalog.tags[?(@.descriptor.code=='PAGINATION')]
        subTags: $.list[*].descriptor.code
        var_page: 
          - CURRENT_PAGE_NUMBER
        _CONTINUE_: '!(var_page all in subTags)'
        _RETURN_:
          - _NAME_: REQUIRED_ITEMS
            _RETURN_:
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_PRICE_VALUE
                attr: $.message.catalog.providers[*].items[*].price.value
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_PRICE_CURRENCY
                attr: $.message.catalog.providers[*].items[*].price.currency
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_PRICE_FULFILLMENT_ID
                attr: $.message.catalog.providers[*].items[*].fulfillment_ids[*]
                _RETURN_: attr are present
              - _NAME_: VALID_MESSAGE_PROVIDERS_ITEMS_FULFILLMENTS
                attr: $.message.catalog.providers[*].items[*].fulfillment_ids[*]
                usecasepath: $.message.catalog.providers[*].fulfillments[*].id
                _RETURN_: attr all in usecasepath
          - _NAME_: ITEM_TAGS
            _RETURN_:
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_TAG_GROUP_PAGE_1
                validTags:
                  - FARE_BREAK_UP
                tagPath: >-
                  $.message.catalog.providers[*].items[*].tags[*].descriptor.code
                _RETURN_: tagPath any in validTags
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_FARE_BREAK_UP
                _SCOPE_: >-
                  $.message.catalog.providers[*].items[*].tags[*][?(@.descriptor.code=='FARE_BREAK_UP')]
                subTags: $.list[*].descriptor.code
                validValues:
                  - TAX
                  - OTHER_CHARGES
                  - BASE_FARE
                _CONTINUE_: '!(subTags are present)'
                _RETURN_: subTags all in validValues
      - _NAME_: ON_SEARCH_PAYMENTS
        action: 
          - on_search
        _RETURN_:
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_PAYMENTS_TAG_GROUP
            validTags:
              - BUYER_FINDER_FEES
              - SETTLEMENT_TERMS
            tagPath: $.message.catalog.providers[*].payments[*].tags[*].descriptor.code
            _RETURN_: tagPath all in validTags
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_PAYMENTS_BUYER_FINDER_FEES
            _SCOPE_: $.message.catalog.providers[*].payments[*].tags[?(@.descriptor.code=='BUYER_FINDER_FEES')]
            subTags: $.list[*].descriptor.code
            validValues:
              - BUYER_FINDER_FEES_PERCENTAGE
            _CONTINUE_: '!(subTags are present)'
            _RETURN_: subTags all in validValues
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_PAYMENTS_SETTLEMENT_TERMS
            _SCOPE_: $.message.catalog.providers[*].payments[*].tags[?(@.descriptor.code=='SETTLEMENT_TERMS')]
            subTags: $.list[*].descriptor.code
            validValues:
              - SETTLEMENT_WINDOW
              - SETTLEMENT_BASIS
              - MANDATORY_ARBITRATION
              - COURT_JURISDICTION
              - STATIC_TERMS
            _CONTINUE_: '!(subTags are present)'
            _RETURN_: subTags all in validValues
      - _NAME_: ON_SEARCH_CATALOG_TAGS_1
        action: 
          - on_search
        _SCOPE_: $.message.catalog.tags[?(@.descriptor.code=='PAGINATION')]
        subTags: $.list[*].descriptor.code
        var_page: 
          - CURRENT_PAGE_NUMBER
        _CONTINUE_: '(var_page all in subTags)'  
        _RETURN_:
          - &REQUIRED_MESSAGE_CATALOG_PAGINATION_TAGS
            _NAME_: REQUIRED_MESSAGE_CATALOG_PAGINATION_TAGS
            validTags:
              - PAGINATION
            tagPath: $.message.catalog.tags[*].descriptor.code
            _RETURN_: tagPath all in validTags
          - &REQUIRED_MESSAGE_CATALOG_PAGINATION_1
            _NAME_: REQUIRED_MESSAGE_CATALOG_PAGINATION_1
            _SCOPE_: $.message.catalog.tags[?(@.descriptor.code=='PAGINATION')]
            subTags: $.list[*].descriptor.code
            validValues:
              - PAGINATION_ID
              - MAX_PAGE_NUMBER
            _CONTINUE_: '!(subTags are present)'
            _RETURN_: subTags all in validValues
      - _NAME_: ON_SEARCH_CATALOG_TAGS_WITH_PAGE_NUMBER
        action: 
          - on_search
        _SCOPE_: $.message.catalog.tags[?(@.descriptor.code=='PAGINATION')]
        subTags: $.list[*].descriptor.code
        var_page: 
          - CURRENT_PAGE_NUMBER
        _CONTINUE_: '!(var_page all in subTags)'  
        _RETURN_:
          - *REQUIRED_MESSAGE_CATALOG_PAGINATION_TAGS
          - _NAME_: REQUIRED_MESSAGE_CATALOG_PAGINATION_1
            _SCOPE_: $.message.catalog.tags[?(@.descriptor.code=='PAGINATION')]
            subTags: $.list[*].descriptor.code
            validValues:
              - PAGINATION_ID
              - MAX_PAGE_NUMBER
              - CURRENT_PAGE_NUMBER
            _CONTINUE_: '!(subTags are present)'
            _RETURN_: subTags all in validValues
      
      - _NAME_: ON_SEARCH_FULLFILLMENTS
        action:
          - on_search
        _SCOPE_: $.message.catalog.tags[?(@.descriptor.code=='PAGINATION')]
        subTags: $.list[*].descriptor.code
        var_page:
          - CURRENT_PAGE_NUMBER
        _CONTINUE_: '!(var_page all in subTags)'
        _RETURN_:
          - _NAME_: ON_SEARCH_REQUIRED_FULFILLMENTS
            _RETURN_:
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_ID
                attr: $.message.catalog.providers[*].fulfillments[*].id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_TYPE
                attr: $.message.catalog.providers[*].fulfillments[*].type
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_TYPE
                attr: $.message.catalog.providers[*].fulfillments[*].stops[*].type
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_ID
                attr: $.message.catalog.providers[*].fulfillments[*].stops[*].id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_LOCATIONS_CODE
                attr: $.message.catalog.providers[*].fulfillments[*].stops[*].location.descriptor.code
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_LOCATIONS_NAME
                attr: $.message.catalog.providers[*].fulfillments[*].stops[*].location.descriptor.name
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_TIME_LABEL
                attr: $.message.catalog.providers[*].fulfillments[*].stops[*].time.label
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_TIME_TIMESTAMP
                attr: $.message.catalog.providers[*].fulfillments[*].stops[*].time.timestamp
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_VEHICLE_CATEGORY
                attr: >-
                  $.message.catalog.providers[*].fulfillments[*].vehicle.category
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_VEHICLE_CODE
                attr: $.message.catalog.providers[*].fulfillments[*].vehicle.code
                _RETURN_: attr are present
          - _NAME_: REQUIRED_FULFILLMENTS_CONNECT
            usecasepath: $.message.catalog.providers[*].fulfillments[*].type
            var_path:
              - CONNECT
            _CONTINUE_: '!(usecasepath all in var_path)'
            _RETURN_:
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_TIME_START
                attr: >-
                  $.message.catalog.providers[*].fulfillments[*].stops[*].time.range.start
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_TIME_END
                attr: >-
                  $.message.catalog.providers[*].fulfillments[*].stops[*].time.range.end
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_TIME_DURATION
                attr: >-
                  $.message.catalog.providers[*].fulfillments[*].stops[*].time.duration
                _RETURN_: attr are present
              - _NAME_: VALID_ENUM_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_TIME_END
                attr: >-
                  $.message.catalog.providers[*].fulfillments[*].stops[*].time.range.end
                reg: 
                  - ^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\.\\d{3}Z$
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr follow regex reg
              - _NAME_: VALID_ENUM_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_TIME_DURATION
                attr: >-
                  $.message.catalog.providers[*].fulfillments[*].stops[*].time.duration
                reg: 
                  - ^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\.\\d{3}Z$
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr follow regex reg
              - _NAME_: REQUIRED_FULFILLMENT_TAGS
                validTags:
                  - INFO
                tagPath: >-
                  $.message.catalog.providers[*].fulfillments[*].tags[*].descriptor.code
                _RETURN_: tagPath all in validTags
              - _NAME_: REQUIRED_MESSAGE_CATALOG_PAGINATION_2
                _SCOPE_: $.message.catalog.providers[*].fulfillments[*].tags[?(@.descriptor.code=='INFO')]
                subTags: $.list[*].descriptor.code
                validValues:
                  - FULFILLMENT_SEQUENCE
                  - OPERATED_BY
                _CONTINUE_: '!(subTags are present)'
                _RETURN_: subTags all in validValues
          - _NAME_: VALID_ENUMS_FULFILLMENTS
            _RETURN_:
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_TYPE
                attr: $.message.catalog.providers[*].fulfillments[*].type
                enumList:
                  - TRIP
                  - CONNECT
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr all in enumList
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_TYPE
                attr: $.message.catalog.providers[*].fulfillments[*].stops[*].type
                enumList:
                  - START
                  - END
                  - LAYOVER
                  - INTERMEDIATE_STOP
                  - TRANSIT_STOP
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr all in enumList
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_TIME_LABEL
                attr: >-
                  $.message.catalog.providers[*].fulfillments[*].stops[*].time.label
                enumList:
                  - DATE_TIME
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr all in enumList
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_TIME_TIMESTAMP
                attr: >-
                  $.message.catalog.providers[*].fulfillments[*].stops[*].time.timestamp
                reg: 
                  - ^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\.\\d{3}Z$
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr follow regex reg
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_VEHICLE_CATEGORY
                attr: >-
                  $.message.catalog.providers[*].fulfillments[*].vehicle.category
                enumList:
                  - AIRLINE
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr all in enumList
          - _NAME_: REQUIRED_FULFILLMENT_TAGS
            validTags:
              - INFO
            tagPath: >-
              $.message.catalog.providers[*].fulfillments[*].tags[*].descriptor.code
            _RETURN_: tagPath all in validTags
          # - _NAME_: REQUIRED_MESSAGE_CATALOG_PAGINATION_3
          #   usecasepath: $.message.catalog.providers[*].fulfillments[*].type
          #   var_path:
          #     - CONNECT
          #   _CONTINUE_: (usecasepath all in var_path)
          #   _RETURN_:
          #     - _NAME_: FULFILLMENT_TAGS_CONNECT
          #       _SCOPE_: $.message.catalog.providers[*].fulfillments[*].tags[?(@.descriptor.code=='INFO')]
          #       subTags: $.list[*].descriptor.code
          #       validValues:
          #         - OPERATED_BY
          #         # - PARENT_ID
          #       # _CONTINUE_: '!(subTags are present)'
          #       _RETURN_: (subTags any in validValues)
      - _NAME_: ON_SEARCH_ADDONS
        action:
          - on_search
        usecasepath: $.message.catalog.providers[*].items[*].add_ons[*].id
        _CONTINUE_: '!(usecasepath are present)'
        _RETURN_:
          - _NAME_: REQUIRED_ITEMS_ADD_ONS
            _RETURN_:
              - _NAME_: REQUIRED_ITEMS_ADD_ONS_ID
                attr: $.message.catalog.providers[*].items[*].add_ons[*].id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ITEMS_ADD_ONS_NAME
                attr: $.message.catalog.providers[*].items[*].add_ons[*].descriptor.name
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ITEMS_ADD_ONS_CODE
                attr: $.message.catalog.providers[*].items[*].add_ons[*].descriptor.code
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ITEMS_ADD_ONS_COUNT
                attr: $.message.catalog.providers[*].items[*].add_ons[*].quantity.available.count
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ITEMS_ADD_ONS_PRICE_CURRENCY
                attr: $.message.catalog.providers[*].items[*].add_ons[*].price.currency
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ITEMS_ADD_ONS_PRICE_VALUE
                attr: $.message.catalog.providers[*].items[*].add_ons[*].price.value
                _RETURN_: attr are present
          - _NAME_: VALID_ENUM_ITEMS_ADD_ONS
            _RETURN_:
              - _NAME_: ENUM_ITEMS_ADD_ONS_CODE
                attr: $.message.catalog.providers[*].items[*].add_ons[*].descriptor.code
                enumList:
                  - MEALS
                  - BAGGAGE
                  - FAST_FORWARD
                  - TRAVEL_ASSISTANCE
                  - FREE_CANCELLATION
                  - FREE_DATE_CHANGE
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr all in enumList
    select:
      - _NAME_: SELECT_CONTEXT
        action:
          - select
        domain:
          - ONDC:TRV12
        version:
          - 2.0.0
        _RETURN_: *ref_147
      - _NAME_: SELECT_ITEMS
        action:
          - select
        _RETURN_:
          - &ref_148
            _NAME_: REQUIRED_ITEM_ID_MAIN
            attr: 
              - $.message.order.items[*].id
            usecasepath: 
              - $.message.order.items[*].parent_item_id
            _CONTINUE_: '!(usecasepath are present)'
            _RETURN_: attr are present

          - _NAME_: REQUIRED_ITEM_PARENT_ID
            attr: $.message.order.items[*].parent_item_id 
            usecasepath: $.message.order.items[*].id
            _CONTINUE_: '!(usecasepath are present)'
            _RETURN_: attr are present 
          - &ref_149
            _NAME_: REQUIRED_ITEM_QUANTITY_COUNT
            attr: $.message.order.items[*].quantity.selected.count
            _RETURN_: attr are present
      - _NAME_: SELECT_ITEMS_1
        _SCOPE_: $.message.order.fulfillments[*].tags[?(@.descriptor.code=='SEAT_GRID')]
        subTags: $.list[*].descriptor.code
        validValues:
          - NUMBER
        _CONTINUE_: '!(subTags all in validValues)'
        action:
          - select
        _RETURN_:
          - _NAME_: REQUIRED_ORDER_ITEM_PARENT_ID
            attr: $.message.order.items[*].parent_item_id
            _RETURN_: attr are present
      - _NAME_: SELECT_FULFILLMENTS
        action:
          - select
        _SCOPE_: $.message.order.fulfillments[*].tags[?(@.descriptor.code=='SEAT_GRID')]
        subTags: $.list[*].descriptor.code
        validValues:
          - NUMBER
        _CONTINUE_: '(subTags all in validValues)'
        _RETURN_:

          - &REQUIRED_FULFILLMENT_ID_SELECT
            _NAME_: REQUIRED_FULFILLMENT_ID
            attr: $.message.order.fulfillments[*].id
            _RETURN_: attr are present
          - &REQUIRED_FULFILLMENT_STOPS_ID_SELECT
            _NAME_: REQUIRED_FULFILLMENT_STOPS_ID
            attr: $.message.order.fulfillments[*].stops[*].id
            _RETURN_: attr are present
      - _NAME_: SELECT_FULFILLMENTS_1
        action:
          - select
        _SCOPE_: $.message.order.fulfillments[*].tags[?(@.descriptor.code=='SEAT_GRID')]
        subTags: $.list[*].descriptor.code
        validValues:
          - NUMBER
        _CONTINUE_: '!(subTags all in validValues)'
        _RETURN_:
          - *REQUIRED_FULFILLMENT_ID_SELECT
          - _NAME_: VALIDATE_FULFILLMENT_TAGS_SEAT_GRID
            tagPath: $.message.order.fulfillments[*].tags[*].descriptor.code
            validTags:
              - SEAT_GRID
            _RETURN_: tagPath all in validTags
          - _NAME_: VALIDATE_TAG_SEAT_GRID
            _SCOPE_: >-
              $.message.intent.payment.tags[*][?(@.descriptor.code=='SEAT_GRID')]
            subTags: $.list[*].descriptor.code
            validValues:
              - NUMBER
              - SELECTED
              - SEAT_PRICE
            _CONTINUE_: '!(subTags are present)'
            _RETURN_: subTags all in validValues
      - _NAME_: SELECT_FULFILLMENTS_2
        
        _SCOPE_: $.message.order.fulfillments[*].tags[?(@.descriptor.code=='INFO')]
        subTags: $.list[*].descriptor.code
        validValues:
          - OPERATED_BY
        _CONTINUE_: '(subTags all in validValues)'
        _RETURN_:
          - *REQUIRED_FULFILLMENT_ID_SELECT
          - *REQUIRED_FULFILLMENT_STOPS_ID_SELECT
          - _NAME_: REQUIRED_FULFILLMENT_TAGS
            validTags:
              - INFO
            tagPath: >-
              $.message.order.fulfillments[*].tags[*].descriptor.code
            _RETURN_: tagPath all in validTags
          - _NAME_: REQUIRED_MESSAGE_CATALOG_PAGINATION_4
            _SCOPE_: $.message.order.fulfillments[*].tags[?(@.descriptor.code=='INFO')]
            subTags: $.list[*].descriptor.code
            validValues:
              - OPERATED_BY
            _CONTINUE_: '!(subTags are present)'
            _RETURN_: subTags all in validValues
      - _NAME_: SELECT_ADD_ONS
        action:
          - select
        usecasepath: 
          - $.message.order.items[*].add_ons[*].id
        _CONTINUE_: '!(usecasepath are present)'
        _RETURN_: &ref_150
          - _NAME_: REQUIRED_ADD_ONS_ID
            attr: $.message.order.items[*].add_ons[*].id
            _RETURN_: attr are present
          - _NAME_: REQUIRED_ADD_ONS_QAUNTITY
            attr: $.message.order.items[*].add_ons[*].quantity.selected.count
            _RETURN_: attr are present
      - _NAME_: SELECT_PROVIDER
        action:
          - select
        _RETURN_:
          - _NAME_: REQUIRED_ORDER_PROVIDER
            attr: $.message.order.provider.id
            _RETURN_: attr are present
    on_select:
      - _NAME_: ON_SELECT_CONTEXT
        action:
          - on_select
        domain:
          - ONDC:TRV12
        version:
          - 2.0.0
        _RETURN_: *ref_147
      - _NAME_: ON_SELECT_ITEMS
        action:
          - on_select
        _RETURN_: &ref_152
          - _NAME_: REQUIRED_ITEMS
            _RETURN_:
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEMS_ID
                attr: $.message.order.items[*].id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEMS_CODE
                attr: $.message.order.items[*].descriptor.code
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEMS_NAME
                attr: $.message.order.items[*].descriptor.name
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_QUANTITY
                attr: $.message.order.items[*].quantity.selected.count
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_CATEGORY
                attr: $.message.order.items[*].category_ids[*]
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_TIME_LABEL
                attr: $.message.order.items[*].time.label
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_TIME_DURATION
                attr: $.message.order.items[*].time.duration
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_REFUND_TERMS
                attr: $.message.order.items[*].refund_terms[*].refund_eligible
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_PRICE_VALUE
                attr: $.message.order.items[*].price.value
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_PRICE_CURRENCY
                attr: $.message.order.items[*].price.currency
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_PRICE_FULFILLMENT_ID
                attr: $.message.order.items[*].fulfillment_ids[*]
                _RETURN_: attr are present
              - _NAME_: VALID_MESSAGE_PROVIDERS_ITEMS_FULFILLMENTS
                attr: $.message.order.items[*].fulfillment_ids[*]
                usecasepath: $.message.order.fulfillments[*].id
                _RETURN_: attr all in usecasepath
              # - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_CANCELLATION_TERMS_URL
              #   attr: >-
              #     $.message.order.items[*].cancellation_terms[*].external_ref.url
              #   _RETURN_: attr are present
              # - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_CANCELLATION_TERMS_MIMETYPE
              #   attr: >-
              #     $.message.order.items[*].cancellation_terms[*].external_ref.mimetype
              #   _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_TAG_GROUP
                validTags:
                  - FARE_TYPE
                  - GENERAL_INFO
                tagPath: $.message.order.items[*].tags[*].descriptor.code
                _RETURN_: tagPath all in validTags
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_FARE_TYPE
                _SCOPE_: >-
                  $.message.order.items[*].tags[?(@.descriptor.code=='FARE_TYPE')]
                subTags: $.list[*].descriptor.code
                validValues:
                  - REGULAR
                  - STUDENT
                  - SENIOR_CITIZEN
                  - ARMED_FORCES
                  - DOCTORS_NURSES
                _CONTINUE_: '!(subTags are present)'
                _RETURN_: subTags all in validValues
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_GENERAL_INFO
                _SCOPE_: >-
                  $.message.order.items[*].tags[?(@.descriptor.code=='GENERAL_INFO')]
                subTags: $.list[*].descriptor.code
                validValues:
                  - CABIN_BAGGAGE
                  - CHECK_IN_BAGGAGE
                  - PROHIBITED_ITEMS
                _CONTINUE_: '!(subTags are present)'
                _RETURN_: subTags all in validValues
          - _NAME_: VALID_ENUM_ITEMS
            _RETURN_:
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEMS_CODE
                attr: $.message.order.items[*].descriptor.code
                enumList:
                  - ADULT_TICKET
                  - CHILD_TICKET
                  - INFANT_TICKET
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr all in enumList
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ITEM_TIME_LABEL
                attr: $.message.order.items[*].time.label
                enumList:
                  - JOURNEY_TIME
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr all in enumList
      - _NAME_: ON_SELECT_FULFILLMENTS
        action:
          - on_select
        _RETURN_:
          - &REQUIRED_FULFILLMENTS_ON_SELECT
            _NAME_: ON_SELECT_REQUIRED_FULFILLMENTS
            usecasepath: $.message.order.fulfillments[*].type
            # var_type_1:
            #   - TRIP
            # var_type_2:
            #   - CONNECT
            # _CONTINUE_: !((var_type_1 any in usecasepath) || (var_type_2 any in usecasepath))
            var_type_1: 
              - TICKET
            _CONTINUE_: (var_type_1 any in usecasepath)
            _RETURN_:
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_ID
                attr: $.message.order.fulfillments[*].id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_TYPE
                attr: $.message.order.fulfillments[*].type
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_TYPE
                attr: $.message.order.fulfillments[*].stops[*].type
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_ID
                attr: $.message.order.fulfillments[*].stops[*].id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_LOCATIONS_CODE
                attr: $.message.order.fulfillments[*].stops[*].location.descriptor.code
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_LOCATIONS_NAME
                attr: $.message.order.fulfillments[*].stops[*].location.descriptor.name
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_TIME_LABEL
                attr: $.message.order.fulfillments[*].stops[*].time.label
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_TIME_TIMESTAMP
                attr: $.message.order.fulfillments[*].stops[*].time.timestamp
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_VEHICLE_CATEGORY
                attr: $.message.order.fulfillments[*].vehicle.category
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_VEHICLE_CODE
                attr: $.message.order.fulfillments[*].vehicle.code
                _RETURN_: attr are present
              - _NAME_: REQUIRED_FULFILLMENT_TAGS_QUOTE
                usecasepath: $.message.order.quote.id
                _CONTINUE_: '!(usecasepath are present)'
                _RETURN_:
                  - _NAME_: REQUIRED_FULFILLMENT_TAGS_1
                    validTags:
                      - INFO
                    tagPath: $.message.order.fulfillments[*].tags[*].descriptor.code
                    _RETURN_: tagPath all in validTags
                  - _NAME_: REQUIRED_MESSAGE_FULFILLMENT_INFO
                    _SCOPE_: >-
                      $.message.order.fulfillments[*].tags[?(@.descriptor.code=='INFO')]
                    subTags: $.list[*].descriptor.code
                    validValues:
                      - OPERATED_BY
                    _CONTINUE_: '!(subTags are present)'
                    _RETURN_: subTags all in validValues
              - _NAME_: REQUIRED_FULFILLMENT_TAGS_QUOTE_NOT_PRESENT
                usecasepath: $.message.order.quote.id
                _CONTINUE_: (usecasepath are present)
                _RETURN_:
                  - _NAME_: REQUIRED_FULFILLMENT_TAGS_2
                    validTags:
                      - VEHICLE_GRID
                      - VEHICLE_AVAIBALITY
                      - INFO
                    tagPath: $.message.order.fulfillments[*].tags[*].descriptor.code
                    _RETURN_: tagPath all in validTags
                  - _NAME_: REQUIRED_MESSAGE_FULFILLMENT_VEHICLE
                    _SCOPE_: >-
                      $.message.order.fulfillments[*].tags[?(@.descriptor.code=='VEHICLE_GRID')]
                    subTags: $.list[*].descriptor.code
                    validValues:
                      - X_MAX
                      - Y_MAX
                      - Z_MAX
                      - X_LOBBY_START
                      - X_LOBBY_SIZE
                      - Y_LOBBY_START
                      - Y_LOBBY_SIZE
                      - SEAT_SELECTION
                    _CONTINUE_: '!(subTags are present)'
                    _RETURN_: subTags all in validValues
                  - _NAME_: REQUIRED_MESSAGE_FULFILLMENT_VEHICLE_AVAIBALITY
                    _SCOPE_: >-
                      $.message.order.fulfillments[*].tags[?(@.descriptor.code=='VEHICLE_AVAIBALITY')]
                    subTags: $.list[*].descriptor.code
                    validValues:
                      - AVALIABLE_SEATS
                    _CONTINUE_: '!(subTags are present)'
                    _RETURN_: subTags all in validValues
                  - _NAME_: REQUIRED_MESSAGE_FULFILLMENT_INFO
                    _SCOPE_: >-
                      $.message.order.fulfillments[*].tags[?(@.descriptor.code=='INFO')]
                    subTags: $.list[*].descriptor.code
                    validValues:
                      - OPERATED_BY
                    _CONTINUE_: '!(subTags are present)'
                    _RETURN_: subTags all in validValues
          - &REQUIRED_FULFILLMENTS_CONNECT_ON_SELECT
            _NAME_: REQUIRED_FULFILLMENTS_CONNECT
            usecasepath: $.message.order.fulfillments[*].type
            var_path:
              - CONNECT
            _CONTINUE_: '!(usecasepath all in var_path)'
            _RETURN_:
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_TIME_START
                attr: $.message.order.fulfillments[*].stops[*].time.range.start
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_TIME_END
                attr: $.message.order.fulfillments[*].stops[*].time.range.end
                _RETURN_: attr are present
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_TIME_DURATION
                attr: $.message.order.fulfillments[*].stops[*].time.duration
                _RETURN_: attr are present
              - _NAME_: VALID_ENUM_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_TIME_END
                attr: $.message.order.fulfillments[*].stops[*].time.range.end
                reg: 
                  - ^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\.\\d{3}Z$
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr follow regex reg
              - _NAME_: VALID_ENUM_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_TIME_DURATION
                attr: $.message.order.fulfillments[*].stops[*].time.duration
                reg:
                  -  ^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\.\\d{3}Z$
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr follow regex reg
              - _NAME_: REQUIRED_FULFILLMENT_TAGS_3
                validTags:
                  - INFO
                tagPath: $.message.order.fulfillments[*].tags[*].descriptor.code
                _RETURN_: tagPath all in validTags
              - _NAME_: REQUIRED_MESSAGE_CATALOG_PAGINATION_5
                _SCOPE_: $.message.order.fulfillments[*].tags[?(@.descriptor.code=='INFO')]
                subTags: $.list[*].descriptor.code
                validValues:
                  - FULFILLMENT_SEQUENCE
                _CONTINUE_: '!(subTags are present)'
                _RETURN_: subTags all in validValues
          - _NAME_: REQUIRED_FULFILLMENTS_TICKET
            usecasepath: $.message.order.fulfillments[*].type
            var_type_1:
              - TICKET
            _CONTINUE_: '!(var_type_1 all in usecasepath)'
            _RETURN_:
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_ID
                attr: $.message.order.fulfillments[*].id
                _RETURN_: attr are present
              - &ref_155
                _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_TYPE
                attr: $.message.order.fulfillments[*].type
                _RETURN_: attr are present
              - &ref_156
                _NAME_: REQUIRED_FULFILLMENT_TAGS_4
                validTags:
                  - SEAT_GRID
                tagPath: $.message.order.fulfillments[*].tags[*].descriptor.code
                _RETURN_: tagPath any in validTags
              - &ref_157
                _NAME_: REQUIRED_MESSAGE_FULFILLMENT_SEAT_GRID
                _SCOPE_: >-
                  $.message.order.fulfillments[*].tags[?(@.descriptor.code=='SEAT_GRID')]
                subTags: $.list[*].descriptor.code
                validValues:
                  - X
                  - 'Y'
                  - Z
                  - SEAT_NUMBER
                  - AVAILABLE
                  - SEAT_PRICE
                  - SELECTED_SEAT
                _CONTINUE_: '!(subTags are present)'
                _RETURN_: subTags all in validValues
          - _NAME_: VALID_ENUMS_FULFILLMENTS
            _RETURN_:
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_TYPE
                attr: $.message.order.fulfillments[*].type
                enumList:
                  - TRIP
                  - CONNECT
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr any in enumList
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_TYPE
                attr: $.message.order.fulfillments[*].stops[*].type
                enumList:
                  - START
                  - END
                  - LAYOVER
                  - INTERMEDIATE_STOP
                  - TRANSIT_STOP
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr all in enumList
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_TIME_LABEL
                attr: $.message.order.fulfillments[*].stops[*].time.label
                enumList:
                  - DATE_TIME
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr all in enumList
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_STOPS_TIME_TIMESTAMP
                attr: $.message.order.fulfillments[*].stops[*].time.timestamp
                reg: 
                  - ^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\.\\d{3}Z$
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr follow regex reg
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_VEHICLE_CATEGORY
                attr: $.message.order.fulfillments[*].vehicle.category
                enumList:
                  - AIRLINE
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr all in enumList
      - _NAME_: ON_SELECT_ADDONS
        action:
          - on_select
        usecasepath: $.message.order.items[*].add_ons[*].id
        _CONTINUE_: '!(usecasepath are present)'
        _RETURN_:
          - _NAME_: REQUIRED_ITEMS_ADD_ONS
            _RETURN_:
              - _NAME_: REQUIRED_ITEMS_ADD_ONS_ID
                attr: $.message.order.items[*].add_ons[*].id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ITEMS_ADD_ONS_NAME
                attr: $.message.order.items[*].add_ons[*].descriptor.name
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ITEMS_ADD_ONS_CODE
                attr: $.message.order.items[*].add_ons[*].descriptor.code
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ITEMS_ADD_ONS_COUNT
                attr: $.message.order.items[*].add_ons[*].quantity.selected.count
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ITEMS_ADD_ONS_PRICE_CURRENCY
                attr: $.message.order.items[*].add_ons[*].price.currency
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ITEMS_ADD_ONS_PRICE_VALUE
                attr: $.message.order.items[*].add_ons[*].price.value
                _RETURN_: attr are present
          - _NAME_: VALID_ENUM_ITEMS_ADD_ONS
            _RETURN_:
              - _NAME_: ENUM_ITEMS_ADD_ONS_CODE
                attr: $.message.order.items[*].add_ons[*].descriptor.code
                enumList:
                  - MEALS
                  - BAGGAGE
                  - FAST_FORWARD
                  - TRAVEL_ASSISTANCE
                  - FREE_CANCELLATION
                _CONTINUE_: '!(attr are present)'
                _RETURN_: attr all in enumList
      - _NAME_: ON_SELECT_PROVIDER
        action:
          - on_select
        domain:
          - ONDC:TRV12
        _RETURN_: &ref_163
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ID
            attr: $.message.order.provider.id
            _RETURN_: attr are present
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_DESCRIPTOR
            attr: $.message.order.provider.descriptor.name
            _RETURN_: attr are present
      - _NAME_: ON_SELECT_QUOTE
        action:
          - on_select
        domain:
          - ONDC:TRV12
        usecasepath: $.message.order.quote.id
        _CONTINUE_: '!(usecasepath are present)'
        _RETURN_: &ref_159
          - _NAME_: REQUIRED_QUOTE_ITEM_PRICE_CURRENCY
            attr: $.message.order.quote.price.currency
            _RETURN_: attr are present
          - _NAME_: REQUIRED_QUOTE_ITEM_PRICE_VALUE
            attr: $.message.order.quote.price.value
            _RETURN_: attr are present
          - _NAME_: REQUIRED_QUOTE_TITLE
            attr: $.message.order.quote.breakup[*].title
            _RETURN_: attr are present
          - _NAME_: REQUIRED_QUOTE_PRICE_CURRENCY
            attr: $.message.order.quote.breakup[*].price.currency
            _RETURN_: attr are present
          - _NAME_: REQUIRED_QUOTE_PRICE_VALUE
            attr: $.message.order.quote.breakup[*].price.value
            _RETURN_: attr are present
          - _NAME_: REQUIRED_QUOTE_ITEM_ID
            attr: $.message.order.quote.breakup[*].item.id
            _CONTINUE_: '!(attr are present)'
            _RETURN_: attr are present
    init:
      - _NAME_: INIT_CONTEXT
        action:
          - init
        domain:
          - ONDC:TRV12
        version:
          - 2.0.0
        _RETURN_: *ref_147
      - _NAME_: INIT_ITEMS
        action:
          - init
        _RETURN_: &ref_164
          - *ref_148
          - *ref_149
          - _NAME_: REQUIRED_ORDER_ITEM_PARENT_ID
            attr: $.message.order.items[*].parent_item_id
            _RETURN_: attr are present
      - _NAME_: INIT_ADD_ONS
        action:
          - init
        usecasepath: $.message.order.items[*].add_ons[*].id
        _CONTINUE_: '!(usecasepath are present)'
        _RETURN_: *ref_150
      - _NAME_: INIT_FULFILLMENTS
        usecasepath: $.message.order.fulfillments[*].stops[*].id
        _CONTINUE_: '!(usecasepath are present)'
        action:
          - init
        _RETURN_: &ref_153
          - &ref_151
            _NAME_: REQUIRED_FULFILLMENT_ID
            attr: $.message.order.fulfillments[*].id
            _RETURN_: attr are present
          - _NAME_: REQUIRED_FULFILLMENT_STOPS_ID
            attr: $.message.order.fulfillments[*].stops[*].id
            _RETURN_: attr are present
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_VEHICLE_CATEGORY
            attr: $.message.order.fulfillments[*].vehicle.category
            _RETURN_: attr are present
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_FULFILLMENTS_VEHICLE_CODE
            attr: $.message.order.fulfillments[*].vehicle.code
            _RETURN_: attr are present
          - _NAME_: VALID_ENUM_MESSAGE_PROVIDERS_FULFILLMENTS_VEHICLE_CATEGORY
            attr: $.message.order.fulfillments[*].vehicle.category
            enumList:
              - AIRLINE
            _CONTINUE_: '!(attr are present)'
            _RETURN_: attr all in enumList
      - _NAME_: INIT_FULFILLMENTS_1
        usecasepath: $.message.order.fulfillments[*].stops[*].id
        _CONTINUE_: (usecasepath are present)
        action:
          - init
        _RETURN_: &ref_158
          - *ref_151
          - &REQUIRED_CUSTOMER_NAME
            _NAME_: REQUIRED_CUSTOMER_NAME
            attr: $.message.order.fulfillments[*].customer.person.name
            _RETURN_: attr are present
          - &REQUIRED_CUSTOMER_AGE
            _NAME_: REQUIRED_CUSTOMER_AGE
            attr: $.message.order.fulfillments[*].customer.person.age
            _RETURN_: attr are present
          - &REQUIRED_CUSTOMER_GENDER
            _NAME_: REQUIRED_CUSTOMER_GENDER
            attr: $.message.order.fulfillments[*].customer.person.gender
            _RETURN_: attr are present
          - &REQUIRED_CUSTOMER_DOB
            _NAME_: REQUIRED_CUSTOMER_DOB
            attr: $.message.order.fulfillments[*].customer.person.dob
            _RETURN_: attr are present
          - &REQUIRED_CUSTOMER_CONTACT
            _NAME_: REQUIRED_CUSTOMER_CONTACT
            attr: $.message.order.fulfillments[*].customer.contact.phone
            _RETURN_: attr are present
          - &REQUIRED_CUSTOMER_CONTACT_EMAIL
            _NAME_: REQUIRED_CUSTOMER_CONTACT_EMAIL
            attr: $.message.order.fulfillments[*].customer.contact.email
            _RETURN_: attr are present
      - _NAME_: REQUIRED_BILLING
        action:
          - init
        _RETURN_: &ref_165
          - _NAME_: REQUIRED_BILLING_NAME
            attr: $.message.order.billing.name
            _RETURN_: attr are present
      - _NAME_: REQUIRED_PAYMENTS
        action:
          - init
        _RETURN_:
          - _NAME_: REQUIRED_INIT_PAYMENTS
            _RETURN_:
              - &ref_160
                _NAME_: REQUIRED_PAYMENT_COLLECTED_BY
                attr: $.message.order.payments[*].collected_by
                _RETURN_: attr are present
              - &ref_161
                _NAME_: REQUIRED_PAYMENT_STATUS
                attr: $.message.order.payments[*].status
                _RETURN_: attr are present
              - &init_REQUIRED_PAYMENT_TYPE
                _NAME_: REQUIRED_PAYMENT_TYPE
                attr: $.message.order.payments[*].type
                _RETURN_: attr are present
          - _NAME_: VALID_ENUMS_INIT_PAYMENTS
            _RETURN_:
              - _NAME_: ENUM_PAYMENT_COLLECTED_BY
                attr: $.message.order.payments[*].collected_by
                enumList:
                  - BPP
                  - BAP
                _RETURN_: attr any in enumList
              - _NAME_: REQUIRED_PAYMENT_STATUS
                attr: $.message.order.payments[*].status
                enumList:
                  - NOT-PAID
                  - PAID
                _RETURN_: attr any in enumList
              - _NAME_: REQUIRED_PAYMENT_TYPE
                attr: $.message.order.payments[*].type
                enumList:
                  - PRE-ORDER
                  - ON-ORDER
                  - ON-FULFILLMENT
                _RETURN_: attr any in enumList
      - _NAME_: INIT_PAYMENT_TAGS
        _RETURN_: &ref_162
          - _NAME_: REQUIRED_PAYMENT_TAGS
            validTags:
              - BUYER_FINDER_FEES
              - SETTLEMENT_TERMS
            tagPath: $.message.order.payments[*].tags[*].descriptor.code
            _RETURN_: tagPath all in validTags
          - _NAME_: REQUIRED_PAYMENT_TAG_BUYER_FINDER_FEES
            _SCOPE_: >-
              $.message.order.payments[*].tags[?(@.descriptor.code=='BUYER_FINDER_FEES')]
            subTags: $.list[*].descriptor.code
            validValues:
              - BUYER_FINDER_FEES_PERCENTAGE
            _CONTINUE_: '!(subTags are present)'
            _RETURN_: subTags all in validValues
          - _NAME_: REQUIRED_PAYMENT_TAG_SETTLEMENT_TERMS
            _SCOPE_: >-
              $.message.order.payments[*].tags[?(@.descriptor.code=='SETTLEMENT_TERMS')]
            subTags: $.list[*].descriptor.code
            validValues:
              - SETTLEMENT_WINDOW
              - SETTLEMENT_BASIS
              - MANDATORY_ARBITRATION
              - SETTLEMENT_TYPE
              - SETTLEMENT_AMOUNT
              - DELAY_INTEREST
              - STATIC_TERMS
              - INVOICE_RECEIPT
              - COURT_JURISDICTION
            _CONTINUE_: '!(subTags are present)'
            _RETURN_: subTags any in validValues
    on_init:
      - _NAME_: ON_INIT_CONTEXT
        action:
          - on_init
        domain:
          - ONDC:TRV12
        version:
          - 2.0.0
        _RETURN_: *ref_147
      - _NAME_: ON_INIT_ITEMS
        action:
          - on_init
        _RETURN_: *ref_152
      - _NAME_: ON_INIT_FULFILLMENTS
        action:
          - on_init
        _RETURN_: &ref_173
          - *REQUIRED_FULFILLMENTS_ON_SELECT
          - *REQUIRED_FULFILLMENTS_CONNECT_ON_SELECT
          - _NAME_: REQUIRED_FULFILLMENTS_TICKET
            usecasepath: $.message.order.fulfillments[*].type
            var_type_1:
              - TICKET
            _CONTINUE_: '!(var_type_1 all in usecasepath)'
            _RETURN_:
              - *ref_155
              - *ref_156
              - *ref_157
              - *REQUIRED_CUSTOMER_NAME
              - *REQUIRED_CUSTOMER_AGE
              - *REQUIRED_CUSTOMER_GENDER
              - *REQUIRED_CUSTOMER_DOB
              - *REQUIRED_CUSTOMER_CONTACT
              - *REQUIRED_CUSTOMER_CONTACT_EMAIL
      - _NAME_: ON_INIT_QUOTE
        action:
          - on_init
        _RETURN_: *ref_159
      - _NAME_: ON_INIT_PAYMENTS
        action:
          - on_init
        _RETURN_: &ref_174
          - *ref_160
          - *ref_161
          - *init_REQUIRED_PAYMENT_TYPE
          - &ref_167
            _NAME_: REQUIRED_PAYMENT_ID
            attr: $.message.order.payments[*].id
            _RETURN_: attr are present
          - &ref_168
            _NAME_: REQUIRED_PAYMENT_PARAMS
            attr: $.message.order.payments[*].params.amount
            _RETURN_: attr are present
          - &ref_169
            _NAME_: REQUIRED_PAYMENT_CURRENCY
            attr: $.message.order.payments[*].params.currency
            _RETURN_: attr are present
          - &ref_170
            _NAME_: REQUIRED_PAYMENT_BANK_CODE
            attr: $.message.order.payments[*].params.bank_code
            _RETURN_: attr are present
          - &ref_171
            _NAME_: REQUIRED_PAYMENT_ACCOUNT_NUMBER
            attr: $.message.order.payments[*].params.bank_account_number
            _RETURN_: attr are present
          - &ref_172
            _NAME_: REQUIRED_PAYMENT_PAYMENT_ADDRESS
            attr: $.message.order.payments[*].params.virtual_payment_address
            _RETURN_: attr are present
      - _NAME_: ON_INIT_PAYMENT_TAGS
        action:
          - on_init
        _RETURN_: *ref_162
      - _NAME_: ON_INIT_PROVIDER
        action:
          - on_init
        domain:
          - ONDC:TRV12
        _RETURN_: *ref_163
    confirm:
      - _NAME_: CONFIRM_CONTEXT
        action:
          - confirm
        domain:
          - ONDC:TRV12
        version:
          - 2.0.0
        _RETURN_: *ref_147
      - _NAME_: CONFIRM_ITEMS
        action:
          - init
        _RETURN_: *ref_164
      - _NAME_: CONFIRM_ADD_ONS
        action:
          - confirm
        usecasepath: $.message.order.items[*].add_ons[*].id
        _CONTINUE_: '!(usecasepath are present)'
        _RETURN_: *ref_150
      - _NAME_: CONFIRM_FULFILLMENTS
        usecasepath: $.message.order.fulfillments[*].stops[*].id
        _CONTINUE_: '!(usecasepath are present)'
        action:
          - init
        _RETURN_: *ref_153
      - _NAME_: CONFIRM_FULFILLMENTS_1
        usecasepath: $.message.order.fulfillments[*].stops[*].id
        _CONTINUE_: (usecasepath are present)
        action:
          - init
        _RETURN_: *ref_158
      - _NAME_: REQUIRED_BILLING
        action:
          - confirm
        _RETURN_: *ref_165
      - _NAME_: REQUIRED_PAYMENTS
        action:
          - confirm
        _RETURN_:
          - _NAME_: REQUIRED_INIT_PAYMENTS
            _RETURN_:
              - *ref_160
              - *ref_161
              - *init_REQUIRED_PAYMENT_TYPE
              - *ref_167
              - *ref_168
              - *ref_169
              # - *ref_170
              # - *ref_171
              # - *ref_172
          - _NAME_: REQUIRED_PAYMENT_TRANSACTION_ID
            attr: $.message.order.payments[*].status
            var_status:
              - PAID
            _CONTINUE_: '!(var_status all in attr)'
            _RETURN_: attr are present
      - _NAME_: CONFIRM_PAYMENT_TAGS
        action:
          - confirm
        _RETURN_: *ref_162
    on_confirm:
      - _NAME_: CONFIRM_CONTEXT
        action:
          - on_confirm
        domain:
          - ONDC:TRV12
        version:
          - 2.0.0
        _RETURN_: *ref_147
      - _NAME_: ON_CONFIRM_ITEMS
        action:
          - on_confirm
        _RETURN_: *ref_152
      - _NAME_: ON_CONFIRM_FULFILLMENTS
        action:
          - on_confirm
        _RETURN_: *ref_173
      - _NAME_: ON_CONFIRM_AUTH_FULFILLMENTS
        action:
          - on_confirm
        usecasepath: $.message.order.fulfillments[*].type
        var_type_1:
          - TRIP
        _CONTINUE_: '!(var_type_1 all in usecasepath)'
        _RETURN_:
          - _NAME_: REQUIRED_AUTH_TYPE
            attr: $.message.order.fulfillments[*].stops[*].authorization.type
            _RETURN_: attr are present
          - _NAME_: REQUIRED_AUTH_TOKEN
            attr: $.message.order.fulfillments[*].stops[*].authorization.token
            _RETURN_: attr are present
          - _NAME_: VALID_ENUM_TYPE
            attr: $.message.order.fulfillments[*].stops[*].authorization.type
            enumList:
              - OTP
              - QR
            _RETURN_: attr are present
      - _NAME_: ON_CONFIRM_QUOTE
        action:
          - on_confirm
        _RETURN_: *ref_159
      - _NAME_: ON_CONFIRM_PROVIDER
        action:
          - on_confirm
        domain:
          - ONDC:TRV12
        _RETURN_: *ref_163
      - _NAME_: ON_CONFIRM_PAYMENTS
        action:
          - on_confirm
        _RETURN_: *ref_174
      - _NAME_: ON_CONFIRM_PAYMENT_TAGS
        action:
          - on_confirm
        _RETURN_: *ref_162
      - _NAME_: ON_CONFIRM_ORDER
        action:
          - on_confirm
        _RETURN_:
          - _NAME_: REQUIRED_ON_CONFIRM_ORDER
            _RETURN_:
              - _NAME_: REQUIRED_ORDER_ID
                attr: $.message.order.id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ORDER_STATUS
                attr: $.message.order.status
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ON_CONFIRM_CREATED_AT
                attr: $.message.order.created_at
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ON_CONFIRM_UPDATED_AT
                attr: $.message.order.updated_at
                _RETURN_: attr are present
          - _NAME_: VALID_ENUM_ON_CONFIRM_ORDER
            _RETURN_:
              - _NAME_: VALID_ENUM_ORDER_STATUS
                attr: $.message.order.status
                enumList:
                  - ACTIVE
                  - COMPLETE
                  - CANCELLED
                _RETURN_: attr any in enumList
              - _NAME_: REGEX_ON_CONFIRM_CREATED_AT
                attr: $.message.order.created_at
                reg:
                  - ^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\.\\d{3}Z$
                _RETURN_: attr follow regex reg
              - _NAME_: REGEX_ON_CONFIRM_UPDATED_AT
                attr: $.message.order.updated_at
                reg:
                  - ^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\.\\d{3}Z$
                _RETURN_: attr follow regex reg

    
  _SESSION_DATA_:
    trans: {} 