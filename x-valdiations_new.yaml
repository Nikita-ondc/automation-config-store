_TESTS_:
    search:
      - _NAME_: SEARCH_CONTEXT
        action: search
        domain: ONDC:TRV10
        version: "2.1.0"
        _RETURN_: &CONTEXT_COMMON
          - _NAME: CONTEXT_REQUIRED
            _RETURN_: &CONTEXT_REQUIRED
            - _NAME_: REQUIRED_CONTEXT_LOCATION_COUNTRY_CODE
              attr: $.context.location.country.code
              _RETURN_: attr are present  
            - _NAME_: REQUIRED_CONTEXT_LOCATION_CITY_CODE
              attr: $.context.location.city.code
              _RETURN_: attr are present
            - _NAME: REQUIRED_CONTEXT_DOMAIN
              attr: $.context.domain
              _RETURN_: attr are present
            - _NAME: REQUIRED_CONTEXT_TIMESTAMP
              attr: $.context.timestamp
              _RETURN_: attr are present
            - _NAME: REQUIRED_CONTEXT_BAP_ID
              attr: $.context.bap_id
              _RETURN_: attr are present
            - _NAME: REQUIRED_CONTEXT_BAP_URI
              attr: $.context.bap_uri
              _RETURN_: attr are present
            - _NAME_: REQUIRED_CONTEXT_BPP_ID
              attr: "$.context.bpp_id"
              var_search: ["search"]
              _CONTINUE_: (search equal to var_search)
              _RETURN_: attr are present
            - _NAME_: REQUIRED_CONTEXT_BPP_URI
              attr: "$.context.bpp_uri"
              var_search: ["search"]
              _CONTINUE_: (action equal to var_search)
              _RETURN_: attr are present
            - _NAME: REQUIRED_CONTEXT_TRANSACTION_ID
              attr: $.context.transaction_id
              _RETURN_: attr are present
            - _NAME: REQUIRED_CONTEXT_MESSAGE_ID
              attr: $.context.message_id
              _RETURN_: attr are present
            - _NAME: REQUIRED_CONTEXT_VERSION
              attr: $.context.version
              _RETURN_: attr are presents 
            - _NAME: REQUIRED_CONTEXT_TTL
              attr: $.context.ttl
              _RETURN_: attr are present

          - _NAME: CONTEXT_ENUM
            _RETURN_: &CONTEXT_ENUM
            - _NAME_: VALID_CONTEXT_LOCATION_COUNTRY_CODE
              attr: $.context.location.country.code
              enumList:
                - IND
              _RETURN_: attr any in enumList
            - _NAME: VALID_CONTEXT_DOMAIN
              attr: $.context.domain
              enumList:
                - ONDC:TRV10
              _RETURN_: attr all in enumList  
          
          - _NAME: CONTEXT_REGEX
            _RETURN_: &CONTEXT_REGEX    
            - _NAME_: REGEX_CONTEXT_LOCATION_CITY_CODE
              attr: $.context.location.city.code
              reg: "(\\*)|(^std\\:[0-9]{2,4}$)"  
              _RETURN_: attr follow regex reg   
            - _NAME: REGEX_CONTEXT_TIMESTAMP
              attr: $.context.timestamp
              reg: ^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$
              _RETURN_: attr follow regex reg
            - _NAME: REGEX_CONTEXT_BAP_ID
              attr: $.context.bap_id
              reg: ^(?!.*\b(?:http|https|www)\b)[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)+$
              _RETURN_: attr follow regex reg
            - _NAME: REGEX_CONTEXT_BAP_URI
              attr: $.context.bap_uri
              reg: ^https:\/\/(www\.)?[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)+$
              _RETURN_: attr follow regex reg
            - _NAME: REQUIRED_CONTEXT_TTL
              attr: $.context.ttl
              reg: ^P(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(\d+H)?(\d+M)?(\d+S)?)?$
              _RETURN_: attr follow regex reg      

          - _NAME_: SEARCH_INTENT
            action: search
            _RETURN_:
              - _NAME_: REQUIRED_CATEGORY_CODE
                attr: $.message.intent.category.descriptor.code
                _RETURN_: attr are present
              - _NAME_: VALID_ENUM_CATEGORY_CODE
                attr: $.message.intent.category.descriptor.code
                enumList:
                  - ON_DEMAND_TRIP
                  - ON_DEMAND_RENTAL
                  - SCHEDULED_TRIP
                  - SCHEDULED_RENTAL
                _RETURN_: attr any in enumList

          - _NAME_: SEARCH_FULFILMENT
            action: search
            _RETURN_: 
              #ON_DEMAND_TRIP: check for stops, intermediate, parent_stops  
              # how to check array items, like start & end needs to be present
              - _NAME_: REQUIRED_SEARCH_FULFILLMENT_1
                action: search
                usecasepath: $.message.intent.category.descriptor.code
                var_category: ON_DEMAND_TRIP
                _CONTINUE_: "!(var_category equal to usecasepath)"
                _RETURN_:
                  - _NAME: REQUIRED_FULFILLMENT
                    _RETURN_: 
                      - _NAME_: REQUIRED_FULFILLMENT_STOPS_LOCATION
                        attr: $.message.intent.fulfillment.stops[*].location.gps
                        _RETURN_: attr are present
                      - _NAME_: REQUIRED_FULFILLMENT_STOPS_TYPE
                        attr: $.message.intent.fulfillment.stops[*].type
                        _RETURN_: attr are present

                      #check parent_stop_id for Ride with multiple stops
                      - _NAME_: REQUIRED_FULFILLMENT_STOPS_PARENT_ITEM_ID
                        attr: $.message.intent.fulfillment.stops[*].parent_stop_id
                        usecasepath: $.message.intent.fulfillment.stops[*].type
                        var_category: INTERMEDIATE_STOP
                        _CONTINUE_: "!(var_category equal to usecasepath)"
                        _RETURN_: attr are present


                  - _NAME_: VALID_ENUMS
                    _RETURN_: 
                      - _NAME_: VALID_ENUM_STOPS
                        attr: $.message.intent.fulfillment.stops[*].type
                        enumList:
                          - START
                          - END
                          - INTERMEDIATE_STOP
                        _RETURN_: attr all in enumList

                      #regex validation for gps
                      - _NAME_: REQUIRED_FULFILLMENT_STOPS_LOCATION
                        attr: $.message.intent.fulfillment.stops[*].location.gps
                        reg: ^gps:\s*-?\d{1,2}\.\d{1,6},\s*-?\d{1,3}\.\d{1,6}$
                        _RETURN_: attr follow regex reg
              #SCHEDULED_RENTAL: delta -> timestamp
              - _NAME_: REQUIRED_SEARCH_FULFILLMENT_2
                action: search
                usecasepath: $.message.intent.category.descriptor.code
                var_category: SCHEDULED_RENTAL
                _CONTINUE_: "!(var_category equal to usecasepath)"
                _RETURN_: 
                  - _NAME: REQUIRED_FULFILLMENT
                    _RETURN_: 
                      - _NAME_: REQUIRED_FULFILLMENT_STOPS_LOCATION
                        attr: $.message.intent.fulfillment.stops[*].location.gps
                        _RETURN_: attr are present
                      - _NAME_: REQUIRED_FULFILLMENT_STOPS_TYPE
                        attr: $.message.intent.fulfillment.stops[*].type
                        _RETURN_: attr are present
                      - _NAME_: REQUIRED_FULFILLMENT_STOPS_TIME
                        attr: $.message.intent.fulfillment.stops[*].time.timestamp
                        _RETURN_: attr are present
                  - _NAME_: VALID_ENUMS
                    _RETURN_: 
                      - _NAME_: VALID_ENUM_STOPS
                        attr: $.message.intent.fulfillment.stops[*].type
                        enumList:
                          - START
                        _RETURN_: attr all in enumList

                      #regex validation for gps
                      - _NAME_: REGEX_FULFILLMENT_STOPS_LOCATION
                        attr: $.message.intent.fulfillment.stops[*].location.gps
                        reg: ^gps:\s*-?\d{1,2}\.\d{1,6},\s*-?\d{1,3}\.\d{1,6}$
                        _RETURN_: attr follow regex reg  

                      - _NAME_: REGEX_FULFILLMENT_STOPS_TIME
                        attr: $.message.intent.fulfillment.stops[*].location.gps
                        reg: ^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$
                        _RETURN_: attr follow regex reg 

              #SCHEDULED_TRIP: delta -> timestamp
              - _NAME_: REQUIRED_SEARCH_FULFILLMENT_3
                action: search
                usecasepath: $.message.intent.category.descriptor.code
                var_category: SCHEDULED_TRIP
                _CONTINUE_: "!(var_category equal to usecasepath)"
                _RETURN_: 
                  - _NAME: REQUIRED_FULFILLMENT
                    _RETURN_: 
                      - _NAME_: REQUIRED_FULFILLMENT_STOPS_LOCATION
                        attr: $.message.intent.fulfillment.stops[*].location.gps
                        _RETURN_: attr are present
                      - _NAME_: REQUIRED_FULFILLMENT_STOPS_TYPE
                        attr: $.message.intent.fulfillment.stops[*].type
                        _RETURN_: attr are present
                      - _NAME_: REQUIRED_FULFILLMENT_STOPS_TIME
                        attr: $.message.intent.fulfillment.stops[*].time.timestamp
                        _RETURN_: attr are present
                  - _NAME_: VALID_ENUMS
                    _RETURN_: 
                      - _NAME_: VALID_ENUM_STOPS
                        attr: $.message.intent.fulfillment.stops[*].type
                        enumList:
                          - START
                        _RETURN_: attr all in enumList

                      #regex validation for gps
                      - _NAME_: REGEX_FULFILLMENT_STOPS_LOCATION
                        attr: $.message.intent.fulfillment.stops[*].location.gps
                        reg: ^gps:\s*-?\d{1,2}\.\d{1,6},\s*-?\d{1,3}\.\d{1,6}$
                        _RETURN_: attr follow regex reg  

                      - _NAME_: REGEX_FULFILLMENT_STOPS_TIME
                        attr: $.message.intent.fulfillment.stops[*].location.gps
                        reg: ^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$
                        _RETURN_: attr follow regex reg 

          - _NAME_: SEARCH_PAYMENT
            action: search
            _RETURN_ : 
              - _NAME_: REQUIRED_PAYMENT_COLLECTED_BY
                attr: "$.message.intent.payment.collected_by"
                _RETURN_: attr are present
              - _NAME_: ENUM_PAYMENT_COLLECTED_BY
                attr: "$.message.intent.payment.collected_by"
                enumList:
                  - BPP
                  - BAP
                _RETURN_: attr any in enumList

          - _NAME_: SEARCH_INTENT_TAGS
            _RETURN:
              - _NAME: PAYMENT_TAG_GROUP
                validTags:
                  - BAP_TERMS
                tagPath: "$.message.intent.tags[*].descriptor.code"
                _RETURN_: tagPath all in validTags
            
              - _NAME_: REQUIRED_PAYMENT_TAG_BAP_TERMS
                _SCOPE_: "$.message.intent.tags[?(@.descriptor.code=='BAP_TERMS')]"
                subTags: "$.list[*].descriptor.code"
                validValues:
                  - BUYER_FINDER_FEES_PERCENTAGE
                  - DELAY_INTEREST
                  - STATIC_TERMS
                _CONTINUE_: "!(subTags are present)"
                _RETURN_: subTags all in validValues

    on_search:
      - _NAME_: ON_SEARCH_CONTEXT
        action: on_search
        domain: ONDC:TRV10
        version: "2.1.0"
        _RETURN_: *CONTEXT_COMMON

       #catalog validations
      - _NAME_: ON_SEARCH_CATALOG
        action: on_search
        _RETURN_:
          - _NAME_: REQUIRED_MESSAGE_CATALOG_NAME
            attr: $.message.catalog.descriptor.name
            _RETURN_: attr are present  

      - _NAME_: ON_SEARCH_PROVIDERS
        action: on_search
        _RETURN_:
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ID
            attr: $.message.catalog.providers[*].id
            _RETURN_: attr are present

      - _NAME_: ON_SEARCH_CATEGORIES
        action: on_search
        _RETURN_:
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_CATEGORY
            _RETURN_:
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_CATEGORY_ID
                attr: $.message.catalog.providers[*].categories[*].id
                _RETURN_: attr are present

              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_CATEGORY_CODE
                attr: $.message.catalog.providers[*].categories[*].descriptor.code
                _RETURN_: attr are present

              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_CATEGORY_NAME
                attr: $.message.catalog.providers[*].categories[*].descriptor.name
                _RETURN_: attr are present

          - _NAME_: VALID_ENUM_MESSAGE_PROVIDERS_CATEGORY
            _RETURN_:
              - _NAME_: VALID_ENUM_MESSAGE_PROVIDERS_CATEGORY_CODE
                attr: $.message.catalog.providers[*].categories[*].descriptor.code
                enumList:
                  - ON_DEMAND_TRIP
                  - ON_DEMAND_RENTAL
                  - SCHEDULED_TRIP
                  - SCHEDULED_RENTAL
                _RETURN_: attr any in enumList

      - _NAME_: ON_SEARCH_LOCATIONS
        action: on_search
        _RETURN_:
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_LOCATIONS
            _RETURN_:
              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_LOCATIONS_ID
                attr: $.message.catalog.providers[*].locations.id
                _RETURN_: attr are present

              - _NAME_: REQUIRED_MESSAGE_PROVIDERS_LOCATIONS_GPS
                attr: $.message.catalog.providers[*].locations.gps
                _RETURN_: attr are present

              - _NAME_: REGEX_MESSAGE_PROVIDERS_LOCATIONS_GPS
                attr: $.message.catalog.providers[*].locations.gps
                reg: ^gps:\s*-?\d{1,2}\.\d{1,6},\s*-?\d{1,3}\.\d{1,6}$
                _RETURN_: attr follow regex reg  

      - _NAME_: ON_SEARCH_FULFILMENT
        action: on_search
        _RETURN_:
          - _NAME_: REQUIRED_ON_SEARCH_FULFILLMENT_1
            action: on_search
            _RETURN_:
              - _NAME_: REQUIRED_FULFILLMENT_ID
                attr: $.message.catalog.providers[*].fulfillments[*].id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_FULFILLMENT_TYPE
                attr: $.message.catalog.providers[*].fulfillments[*].type
                _RETURN_: attr are present
              - _NAME_: REQUIRED_FULFILLMENT_VEHICLE_CATEGORY
                attr: $.message.catalog.providers[*].fulfillments[*].vehicle.category
                _RETURN_: attr are present 
              - _NAME_: REQUIRED_FULFILLMENT_VEHICLE_VARIANT
                attr: $.message.catalog.providers[*].fulfillments[*].vehicle.variant
                _RETURN_: attr are present   
              - _NAME_: REQUIRED_FULFILLMENT_STOPS_LOCATION
                attr: $.message.catalog.providers[*].fulfillments[*].stops[*].location.gps
                _RETURN_: attr are present

              - _NAME_: REQUIRED_FULFILLMENT_STOPS_TYPE
                attr: $.message.catalog.providers[*].fulfillments[*].stops[*].type
                _RETURN_: attr are present    

          
          - _NAME_: VALID_ENUMS_ON_SEARCH_FULFILLMENT
            action: on_search 
            _RETURN_:
              - _NAME_: VALID_FULFILLMENT_TYPE
                attr: $.message.catalog.providers[*].fulfillments[*].type
                enumList:
                  - DELIVERY
                  - SELF_PICKUP
                _RETURN_: attr all in enumList

              - _NAME_: VALID_FULFILLMENT_VEHICLE_CATEGORY
                attr: $.message.catalog.providers[*].fulfillments[*].vehicle.category
                enumList:
                  - AUTO_RICKSHAW
                  - CAB
                  - TWO_WHEELER
                _RETURN_: attr any in enumList

              - _NAME_: VALID_ENUM_FULFILLMENT_VEHICLE_VARIANT
                attr: $.message.catalog.providers[*].fulfillments[*].vehicle.variant
                enumList:
                  - SEDAN
                  - SUV
                  - HATCHBACK
                  - TWO_WHEELER
                  - AUTO_RICKSHAW
                _RETURN_: attr any in enumList     

              #regex validation for gps
              - _NAME_: REQUIRED_FULFILLMENT_STOPS_LOCATION
                attr: $.message.catalog.providers[*].fulfillments[*].stops[*].location.gps
                reg: ^gps:\s*-?\d{1,2}\.\d{1,6},\s*-?\d{1,3}\.\d{1,6}$
                _RETURN_: attr follow regex reg  

      #check for timestamp for SCHEDULED_RENTAL & SCHEDULED_TRIP
      - _NAME_: ON_SEARCH_FULFILMENT
        action: on_search
        attr: $.message.catalog.providers[*].categories[*].descriptor.code
        var_category_1: SCHEDULED_RENTAL
        var_category_2: SCHEDULED_TRIP
        _CONTINUE_: "!((var_category_1 equal to attr) || (var_category_2 equal to attr))"
        _RETURN_:
          - _NAME: REQUIRED_FULFILLMENT_STOPS_TIMESTAMP
            attr: $.message.catalog.providers[*].fulfillments[*].stops[*].time.timestamp
            _RETURN_: attr are present

      - _NAME_: ON_SEARCH_ITEMS
        action: on_search
        _RETURN_:
          - _NAME_: REQUIRED_ON_SEARCH_ITEMS
            _RETURN_:
              - _NAME_: REQUIRED_ITEM_ID
                attr: $.message.catalog.providers[*].items[*].id
                _RETRUN_: attr are present
              
              - _NAME_: REQUIRED_ITEM_CODE
                attr: $.message.catalog.providers[*].items[*].descriptor.code
                _RETURN_: attr are present

              - _NAME_: REQUIRED_ITEM_FULFILLMENT_ID
                attr: $.message.catalog.providers[*].items[*].fulfillment_ids[*]
                _RETURN_: attr are present 

              #check items.fulfillment_ids is same which is present as part of fulfilments.
              - _NAME_: VALID_MESSAGE_PROVIDERS_ITEMS_CATEGORIES
                attr: $.message.catalog.providers[*].items[*].fulfillment_ids[*]
                usecasepath: $.message.catalog.providers[*].fulfillments[*].id
                _RETURN_: attr all in usecasepath  

              - _NAME_: REQUIRED_ITEM_LOCATION_ID
                attr: $.message.catalog.providers[*].items[*].location_ids[*]
                _RETURN_: attr are present 

             #check items.location_ids is same which is present as part of locations.
              - _NAME_: VALID_MESSAGE_PROVIDERS_ITEMS_LOCATION_ID
                attr: $.message.catalog.providers[*].items[*].location_ids[*]
                usecasepath: $.message.catalog.providers[*].locations.id
                _RETURN_: attr all in usecasepath 

              - _NAME_: REQUIRED_ITEM_CATEGORY_ID
                attr: $.message.catalog.providers[*].items[*].category_ids[*]
                _RETURN_: attr are present 

              #check items.category_ids is same which is present as part of categories.
              - _NAME_: VALID_MESSAGE_PROVIDERS_ITEMS_CATEGORIES
                attr: $.message.catalog.providers[*].items[*].category_ids[*]
                usecasepath: $.message.catalog.providers[*].categories[*].id
                _RETURN_: attr all in usecasepath 

              - _NAME_: REQUIRED_ITEMS_CURRENCY
                attr: $.message.catalog.providers[*].items[*].price.currency
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ITEMS_VALUE
                attr: $.message.catalog.providers[*].items[*].price.value
                _RETURN_: attr are present     

          - _NAME_: ENUM_ON_SEARCH_ITEMS
            _RETURN_: 
              - _NAME_: REQUIRED_ITEM_CODE
                attr: $.message.catalog.providers[*].items[*].descriptor.code
                enumList:
                  - RIDE
                _RETURN_: attr any in enumList 
          #pending
          - _NAME_: REQUIRED_ITEMS_CANCELLATION_TERMS
            attr: $.message.catalog.providers[*].items[*].cancellation_terms[*]
            _RETRUN_: attr are present

          #  


      #pending: as attribute checking is not possible til add_ons
      - _NAME: ON_SEARRH_ADD_ONS
        attr: $.message.catalog.providers[*].items[*].add_ons
        _CONTINUE: ()
             
                

      #pending
      - _NAME_: ON_SEARCH_CANCELLATION_TERMS
        action: on_search
        _RETURN_:

      - _NAME_: ON_SEARCH_PAYMENTS
        action: on_search
        _RETURN_:  
          - _NAME_: ON_SEARCH_PAYMENT_COLLECTOR
            attr: $.message.catalog.providers[*].payments[*].collected_by
            _RETURN_: attr are present

          - _NAME_: ENUM_PAYMENT_COLLECTOR
            attr: $.message.catalog.providers[*].payments[*].collected_by
            enumList:
              - BPP
              - BAP
            _RETURN_: attr any in enumList
      
      - _NAME_: ON_SEARCH_TAGS
        action: on_search
        _RETURN_: 
          - _NAME: PAYMENT_TAG_GROUP
            validTags:
              - BPP_TERMS
            tagPath: $.message.catalog.tags[*].descriptor.code
            _RETURN_: tagPath all in validTags 

          - _NAME_: REQUIRED_PAYMENT_TAG_BAP_TERMS
            _SCOPE_: $.message.catalog.tags[*][?(@.descriptor.code=='BPP_TERMS')]
            subTags: $.list[*].descriptor.code
            validValues:
              - BUYER_FINDER_FEES_PERCENTAGE
              - SETTLEMENT_WINDOW
              - SETTLEMENT_BASIS
              - SETTLEMENT_TYPE
              - MANDATORY_ARBITRATION
              - COURT_JURISDICTION
              - DELAY_INTEREST
              - STATIC_TERMS
            _CONTINUE_: "!(subTags are present)"
            _RETURN_: subTags all in validValues     

      - _NAME_: ON_SEARCH_ITEMS_TAGS
        action: on_search
        _RETRUN_:
          - _NAME_: VALID_TAGS
            validTags:
              - DISABILITY_VIS
              - DISABILITY_HEA
              - DISABILITY_MOB
              - DISABILITY_LEP
              - DISABILITY_SPE
              - DISABILITY_INTEL
              - MENTAL
              - DISABILITY_BLOOD
              - DISABILITY_DWARFISM
              - DISABILITY_ACID_ATTACK_SURVIVOR
              - DISABILITY_MULTIPLE_DIS
              - FARE_POLICY
              - INFO
              - FEATURE_LIST
              - FARE_POLICY
              - INFO
              - FEATURE_LIST
            tagPath: $.message.catalog.providers[*].items[*].tags[*].descriptor.code 
            _RETURN_: tagPath all in validTags
          - _NAME_: VALIDATE_TAGS_DISABILITY_VIS
            _SCOPE_: "$.message.catalog.providers[*].items[*].tags[?(@.descriptor.code=='DISABILITY_VIS')]"
            subTags: "$.list[*].descriptor.code"
            validValues:
              - VIS_LEVEL
              - VIS_SCREEN_READER_USAGE
              - VIS_CANE_USAGE
              - VIS_SPECIAL_REQUIREMENT
            _RETURN_: subTags all in validValues
          - _NAME_: VALIDATE_TAGS_DISABILITY_HEA
            _SCOPE_: "$.message.catalog.providers[*].items[*].tags[?(@.descriptor.code=='DISABILITY_HEA')]"
            subTags: "$.list[*].descriptor.code"
            validValues:
              - HEA_READING_ABILITY
              - HEA_SIGN_LANGUAGE_PREFERENCE
              - HEA_SPECIAL_REQUIREMENT
            _RETURN_: subTags all in validValues
          - _NAME_: VALIDATE_TAGS_DISABILITY_MOB
            _SCOPE_: "$.message.catalog.providers[*].items[*].tags[?(@.descriptor.code=='DISABILITY_MOB')]"
            subTags: "$.list[*].descriptor.code"
            validValues:
              - MOB_DISABILITY
              - MOB_WHEELCHAIR_USAGE
              - MOB_CRUTCHES_USAGE
              - MOB_SPECIAL_REQUIREMENT
            _RETURN_: subTags all in validValues
          - _NAME_: VALIDATE_TAGS_DISABILITY_LEP
            _SCOPE_: "$.message.catalog.providers[*].items[*].tags[?(@.descriptor.code=='DISABILITY_LEP')]"
            subTags: "$.list[*].descriptor.code"
            validValues:
              - LEP_SPECIAL_REQUIREMENT
            _RETURN_: subTags all in validValues
          - _NAME_: VALIDATE_TAGS_DISABILITY_SPE
            _SCOPE_: "$.message.catalog.providers[*].items[*].tags[?(@.descriptor.code=='DISABILITY_SPE')]"
            subTags: "$.list[*].descriptor.code"
            validValues:
              - SPE_SPECIAL_REQUIREMENT
            _RETURN_: subTags all in validValues
          - _NAME_: VALIDATE_TAGS_DISABILITY_INTEL
            _SCOPE_: "$.message.catalog.providers[*].items[*].tags[?(@.descriptor.code=='DISABILITY_INTEL')]"
            subTags: "$.list[*].descriptor.code"
            validValues:
              - INTEL_DISABILITY
              - INTEL_SPECIAL_REQUIREMENT
            _RETURN_: subTags all in validValues
          - _NAME_: VALIDATE_TAGS_DISABILITY_MENTAL
            _SCOPE_: "$.message.catalog.providers[*].items[*].tags[?(@.descriptor.code=='MENTAL')]"
            subTags: "$.list[*].descriptor.code"
            validValues:
              - MENTAL_DISABILITY
              - MENTAL_SPECIAL_REQUIREMENT
            _RETURN_: subTags all in validValues
          - _NAME_: VALIDATE_TAGS_DISABILITY_BLOOD
            _SCOPE_: "$.message.catalog.providers[*].items[*].tags[?(@.descriptor.code=='DISABILITY_BLOOD')]"
            subTags: "$.list[*].descriptor.code"
            validValues:
              - BLOOD_DISABILITY
              - BLOOD_SPECIAL_REQUIREMENT
            _RETURN_: subTags all in validValues
          - _NAME_: VALIDATE_TAGS_DISABILITY_DWARFISM
            _SCOPE_: "$.message.catalog.providers[*].items[*].tags[?(@.descriptor.code=='DISABILITY_DWARFISM')]"
            subTags: "$.list[*].descriptor.code"
            validValues:
              - DWARFISM_SPECIAL_REQUIREMENT
            _RETURN_: subTags all in validValues
          - _NAME_: VALIDATE_TAGS_DISABILITY_ACID_ATTACK_SURVIVOR
            _SCOPE_: "$.message.catalog.providers[*].items[*].tags[?(@.descriptor.code=='DISABILITY_ACID_ATTACK_SURVIVOR')]"
            subTags: "$.list[*].descriptor.code"
            validValues:
              - ACID_ATTACK_SURVIVOR_SPECIAL_REQUIREMENT
            _RETURN_: subTags all in validValues
          - _NAME_: VALIDATE_TAGS_DISABILITY_MULTIPLE_DIS
            _SCOPE_: "$.message.catalog.providers[*].items[*].tags[?(@.descriptor.code=='DISABILITY_MULTIPLE_DIS')]"
            subTags: "$.list[*].descriptor.code"
            validValues:
              - BLOOD_DISABILITY
              - BLOOD_SPECIAL_REQUIREMENT
            _RETURN_: subTags all in validValues

          #fare policy
          - _NAME_: VALIDATE_TAGS_FARE_POLICY
            _SCOPE_: "$.message.catalog.providers[*].items[*].tags[?(@.descriptor.code=='FARE_POLICY')]"
            subTags: "$.list[*].descriptor.code"
            validValues:
              - MIN_FARE
              - MIN_FARE_DISTANCE_KM
              - PER_KM_CHARGE
              - PICKUP_CHARGE
              - WAITING_CHARGE_PER_MIN
              - NIGHT_CHARGE_MULTIPLIER
              - NIGHT_SHIFT_START_TIME
              - NIGHT_SHIFT_END_TIME
            _RETURN_: subTags all in validValues
          - _NAME_: VALIDATE_TAGS_INFO
            _SCOPE_: "$.message.catalog.providers[*].items[*].tags[?(@.descriptor.code=='INFO')]"
            subTags: "$.list[*].descriptor.code"
            validValues:
              - DISTANCE_TO_NEAREST_DRIVER_METER
              - ETA_TO_NEAREST_DRIVER_MIN
              - TOTAL_HOUR
              - TOTAL_DISTANCE
            _RETURN_: subTags all in validValues                               
        
    select:
      - _NAME_: SELECT_CONTEXT
        action: select
        domain: ONDC:TRV10
        version: "2.1.0"
        _RETURN_: *CONTEXT_COMMON
      
      
      - _NAME_: SELECT_ITEMS
        action: select
        _RETURN_: &COMMON_ACTION_ITEM
          - _NAME_: REQUIRED_SELECT_ITEM
            _attr: $.message.order.items[*].id
            _RETURN_: attr are present

      - _NAME_: REQUIRED_SELECT_FULFILLMENT
        _attr: $.message.order.fulfillments[*].id
        _RETURN_: attr are present

      - _NAME_: SELECT_PROVIDER
        action: select
        _RETURN_: &COMMON_ACTION_PROVIDER
          - _NAME_: REQUIRED_SELECT_PROVIDER
            _attr: $.message.order.provider.id
            _RETURN_: attr are present 

    on_select:
      - _NAME_: ON_SELECT_CONTEXT
        action: on_select
        domain: ONDC:TRV10
        version: "2.1.0"
        _RETURN_: *CONTEXT_COMMON  

      - _NAME_: ON_SELECT_FULFILLMENT 
        action:
          - on_select
        _RETURN_: &COMMON_ON_ACTION_FULFILLMENTS
          - _NAME_: REQUIRED_ON_SELECT_FULFILLMENT_1
            action:
              - on_select
            _RETURN_: &COMMON_ON_ACTION_REQUIRED_FULFILLMENT
              - _NAME_: REQUIRED_FULFILLMENT_ID
                attr: $.message.order.fulfillments[*].id
                _RETURN_: attr are present
              - _NAME_: REQUIRED_FULFILLMENT_TYPE
                attr: $.message.order.fulfillments[*].type
                _RETURN_: attr are present
              - _NAME_: REQUIRED_FULFILLMENT_VEHICLE_CATEGORY
                attr: $.message.order.fulfillments[*].vehicle.category
                _RETURN_: attr are present 
              - _NAME_: REQUIRED_FULFILLMENT_VEHICLE_VARIANT
                attr: $.message.order.fulfillments[*].vehicle.variant
                _RETURN_: attr are present   
              - _NAME_: REQUIRED_FULFILLMENT_STOPS_LOCATION
                attr: $.message.order.fulfillments[*].stops[*].location.gps
                _RETURN_: attr are present

              - _NAME_: REQUIRED_FULFILLMENT_STOPS_TYPE
                attr: $.message.order.fulfillments[*].stops[*].type
                _RETURN_: attr are present    

          
          - _NAME_: VALID_ENUMS_ON_SELECT_FULFILLMENT
            action: on_search 
            _RETURN_: &COMMON_ON_ACTION_ENUM_FULFILLMENT
              - _NAME_: VALID_FULFILLMENT_TYPE
                attr: $.message.order.fulfillments[*].type
                enumList:
                  - DELIVERY
                  - SELF_PICKUP
                _RETURN_: attr all in enumList

              - _NAME_: VALID_FULFILLMENT_VEHICLE_CATEGORY
                attr: $.message.order.fulfillments[*].vehicle.category
                enumList:
                  - AUTO_RICKSHAW
                  - CAB
                  - TWO_WHEELER
                _RETURN_: attr any in enumList

              - _NAME_: VALID_ENUM_FULFILLMENT_VEHICLE_VARIANT
                attr: $.message.order.fulfillments[*].vehicle.variant
                enumList:
                  - SEDAN
                  - SUV
                  - HATCHBACK
                  - TWO_WHEELER
                  - AUTO_RICKSHAW
                _RETURN_: attr any in enumList     

              #regex validation for gps
              - _NAME_: REQUIRED_FULFILLMENT_STOPS_LOCATION
                attr: $.message.order.fulfillments[*].stops[*].location.gps
                reg: ^gps:\s*-?\d{1,2}\.\d{1,6},\s*-?\d{1,3}\.\d{1,6}$
                _RETURN_: attr follow regex reg  
         
          - _NAME_: ON_SELECT_FULFILLMENT_TAGS
            action: on_select
            _RETRUN_: &COMMON_FULFILLMENT_TAGS
              - _NAME_: VALID_TAGS
                validTags:
                  - ROUTE_INFO
                tagPath: $.message.order.fulfillments[*].tags[*].descriptor.code
                _RETURN_: tagPath all in validTags

              - _NAME_: VALID_TAGS_ROUTE_INFO
                _SCOPE_: $.message.order.fulfillments[*].tags[?(@.descriptor.code=='ROUTE_INFO')]
                subTags: $.list[*].descriptor.code
                validValues:
                  - ENCODED_POLYLINE
                  - WAYPOINTS
                _RETURN_: tagPath all in validTags    
      - _NAME_: ON_SELECT_ITEMS 
        action: on_select
        _RETURN_:
          - _NAME_: REQUIRED_ON_SELECT_ITEMS
            _RETURN_: &COMMON_REQUIRED_ITEMS
              - _NAME_: REQUIRED_ITEM_ID
                attr: $.message.order.providers[*].items[*].id
                _RETRUN_: attr are present
              
              - _NAME_: REQUIRED_ITEM_CODE
                attr: $.message.order.providers[*].items[*].descriptor.code
                _RETURN_: attr are present

              - _NAME_: REQUIRED_ITEM_FULFILLMENT_ID
                attr: $.message.order.items[*].fulfillment_ids[*]
                _RETURN_: attr are present   

              - _NAME_: REQUIRED_ITEM_LOCATION_ID
                attr: $.message.order.items[*].location_ids[*]
                _RETURN_: attr are present 

              - _NAME_: REQUIRED_ITEM_CATEGORY_ID
                attr: $.message.order.items[*].category_ids[*]
                _RETURN_: attr are present 

              - _NAME_: REQUIRED_ITEMS_CURRENCY
                attr: $.message.order.items[*].price.currency
                _RETURN_: attr are present
              - _NAME_: REQUIRED_ITEMS_VALUE
                attr: $.message.order.items[*].price.value
                _RETURN_: attr are present     

          - _NAME_: ENUM_ON_SELECT_ITEMS
            _RETURN_:  &COMMON_VALID_ENUMS
              - _NAME_: REQUIRED_ITEM_CODE
                attr: $.message.order.items[*].descriptor.code
                enumList:
                  - RIDE
                _RETURN_: attr any in enumList 
          #pending
          - _NAME_: REQUIRED_ITEMS_CANCELLATION_TERMS
            attr: $.message.order.items[*].cancellation_terms[*]
            _RETRUN_: attr are present

          - _NAME_: ON_SELECT_ITEM_TAGS
            action: 
              - on_select
            _RETRUN_: &COMMON_ITEM_TAGS
              - _NAME_: VALID_TAGS
                validTags:
                  - DISABILITY_VIS
                  - DISABILITY_HEA
                  - DISABILITY_MOB
                  - DISABILITY_LEP
                  - DISABILITY_SPE
                  - DISABILITY_INTEL
                  - MENTAL
                  - DISABILITY_BLOOD
                  - DISABILITY_DWARFISM
                  - DISABILITY_ACID_ATTACK_SURVIVOR
                  - DISABILITY_MULTIPLE_DIS
                  - FARE_POLICY
                  - INFO
                  - FEATURE_LIST
                tagPath: $.message.order.items[*].tags[*].descriptor.code
                _RETURN_: tagPath all in validTags
              - _NAME_: VALIDATE_TAGS_DISABILITY_VIS
                _SCOPE_: $.message.order.items[*].tags[?(@.descriptor.code=='DISABILITY_VIS')]
                subTags: $.list[*].descriptor.code
                validValues:
                  - VIS_LEVEL
                  - VIS_SCREEN_READER_USAGE
                  - VIS_CANE_USAGE
                  - VIS_SPECIAL_REQUIREMENT
                _RETURN_: subTags all in validValues
              - _NAME_: VALIDATE_TAGS_DISABILITY_HEA
                _SCOPE_: $.message.order.items[*].tags[?(@.descriptor.code=='DISABILITY_HEA')]
                subTags: $.list[*].descriptor.code
                validValues:
                  - HEA_READING_ABILITY
                  - HEA_SIGN_LANGUAGE_PREFERENCE
                  - HEA_SPECIAL_REQUIREMENT
                _RETURN_: subTags all in validValues
              - _NAME_: VALIDATE_TAGS_DISABILITY_MOB
                _SCOPE_: $$.message.order.items[*].tags[?(@.descriptor.code=='DISABILITY_MOB')]
                subTags: $.list[*].descriptor.code
                validValues:
                  - MOB_DISABILITY
                  - MOB_WHEELCHAIR_USAGE
                  - MOB_CRUTCHES_USAGE
                  - MOB_SPECIAL_REQUIREMENT
                _RETURN_: subTags all in validValues
              - _NAME_: VALIDATE_TAGS_DISABILITY_LEP
                _SCOPE_: $.message.order.items[*].tags[?(@.descriptor.code=='DISABILITY_LEP')]
                subTags: $.list[*].descriptor.code
                validValues:
                  - LEP_SPECIAL_REQUIREMENT
                _RETURN_: subTags all in validValues
              - _NAME_: VALIDATE_TAGS_DISABILITY_SPE
                _SCOPE_: $.message.order.items[*].tags[?(@.descriptor.code=='DISABILITY_SPE')]
                subTags: $.list[*].descriptor.code
                validValues:
                  - SPE_SPECIAL_REQUIREMENT
                _RETURN_: subTags all in validValues
              - _NAME_: VALIDATE_TAGS_DISABILITY_INTEL
                _SCOPE_: $.message.order.items[*].tags[?(@.descriptor.code=='DISABILITY_INTEL')]
                subTags: $.list[*].descriptor.code
                validValues:
                  - INTEL_DISABILITY
                  - INTEL_SPECIAL_REQUIREMENT
                _RETURN_: subTags all in validValues
              - _NAME_: VALIDATE_TAGS_DISABILITY_MENTAL
                _SCOPE_: $.message.order.items[*].tags[?(@.descriptor.code=='MENTAL')]
                subTags: $.list[*].descriptor.code
                validValues:
                  - MENTAL_DISABILITY
                  - MENTAL_SPECIAL_REQUIREMENT
                _RETURN_: subTags all in validValues
              - _NAME_: VALIDATE_TAGS_DISABILITY_BLOOD
                _SCOPE_: $.message.order.items[*].tags[?(@.descriptor.code=='DISABILITY_BLOOD')]
                subTags: $.list[*].descriptor.code
                validValues:
                  - BLOOD_DISABILITY
                  - BLOOD_SPECIAL_REQUIREMENT
                _RETURN_: subTags all in validValues
              - _NAME_: VALIDATE_TAGS_DISABILITY_DWARFISM
                _SCOPE_: $.message.order.items[*].tags[?(@.descriptor.code=='DISABILITY_DWARFISM')]
                subTags: $.list[*].descriptor.code
                validValues:
                  - DWARFISM_SPECIAL_REQUIREMENT
                _RETURN_: subTags all in validValues
              - _NAME_: VALIDATE_TAGS_DISABILITY_ACID_ATTACK_SURVIVOR
                _SCOPE_: $.message.order.items[*].tags[?(@.descriptor.code=='DISABILITY_ACID_ATTACK_SURVIVOR')]
                subTags: $.list[*].descriptor.code
                validValues:
                  - ACID_ATTACK_SURVIVOR_SPECIAL_REQUIREMENT
                _RETURN_: subTags all in validValues
              - _NAME_: VALIDATE_TAGS_DISABILITY_MULTIPLE_DIS
                _SCOPE_: $.message.order.items[*].tags[?(@.descriptor.code=='DISABILITY_MULTIPLE_DIS')]
                subTags: $.list[*].descriptor.code
                validValues:
                  - BLOOD_DISABILITY
                  - BLOOD_SPECIAL_REQUIREMENT
                _RETURN_: subTags all in validValues
              - _NAME_: VALIDATE_TAGS_FARE_POLICY
                _SCOPE_: $.message.order.items[*].tags[?(@.descriptor.code=='FARE_POLICY')]
                subTags: "$.list[*].descriptor.code"
                validValues:
                  - MIN_FARE
                  - MIN_FARE_DISTANCE_KM
                  - PER_KM_CHARGE
                  - PICKUP_CHARGE
                  - WAITING_CHARGE_PER_MIN
                  - NIGHT_CHARGE_MULTIPLIER
                  - NIGHT_SHIFT_START_TIME
                  - NIGHT_SHIFT_END_TIME
                _RETURN_: subTags all in validValues
              - _NAME_: VALIDATE_TAGS_INFO
                _SCOPE_: $.message.order.items[*].tags[?(@.descriptor.code=='INFO')]
                subTags: $.list[*].descriptor.code
                validValues:
                  - DISTANCE_TO_NEAREST_DRIVER_METER
                  - ETA_TO_NEAREST_DRIVER_MIN
                  - TOTAL_HOURS
                  - TOTAL_DISTANCE
                _RETURN_: subTags all in validValues

      - _NAME_: ON_SELECT_PROVIDERS
        action: on_select
        _RETURN_:
          - _NAME_: REQUIRED_MESSAGE_PROVIDERS_ID
            attr: $.message.order.providers[*].id
            _RETURN_: attr are present

      - _NAME_: ON_SELECT_QUOTE
        action: on_select
        _RETURN_: &COMMON_ON_ACTION_QUOTE
          - _NAME_: REQUIRED_QUOTE
            _RETURN_: 
              - _NAME_: REQUIRED_QUOTE_TITLE
                attr: $.message.order.quote.breakup[*].title
                _RETURN_: attr are present

              - _NAME_: REQUIRED_QUOTE_PRICE_CURRENCY
                attr: $.message.order.quote.breakup[*].price.currency
                _RETURN_: attr are present

              - _NAME_: REQUIRED_QUOTE_PRICE_VALUE
                attr: $.message.order.quote.breakup[*].price.value
                _RETURN_: attr are present  

              #add_ons check
              - _NAME: REQUIRED_QUOTE_ADD_ONS
                attr: $.message.order.quote.breakup[*].title
                var_title: ADD_ONS
                _CONTINUE_: "!(var_title equal to attr)"
                _RETURN_:
                  - _NAME_: REQUIRED_ITEM_ID
                    attr: $.message.order.quote.breakup[*].item.id
                    _RETURN_: attr are present

                  - _NAME_: REQUIRED_ADD_ONS_ID
                    attr: $.message.order.quote.breakup[*].add_ons[*].id
                    _RETURN_: attr are present

                  - _NAME_: REQUIRED_ADD_ONS_CURRENCY
                    attr: $.message.order.quote.breakup[*].add_ons[*].price.currency
                    _RETURN_: attr are present

                  - _NAME_: REQUIRED_ADD_ONS_VALUE
                    attr: $.message.order.quote.breakup[*].add_ons[*].price.value
                    _RETURN_: attr are present

                  - _NAME_: REQUIRED_ADD_ONS_COUNT
                    attr: $.message.order.quote.breakup[*].add_ons[*].quantity.selected.count
                    _RETURN_: attr are present        


              - _NAME_: REQUIRED_QUOTE_TTL
                attr: $.message.order.quote.breakup[*].price.value
                _RETURN_: attr are present
            
              - _NAME_: REQUIRED_QUOTE_ITEM_PRICE_CURRENCY
                attr: $.message.order.quote.price.currency
                _RETURN_: attr are present

              - _NAME_: REQUIRED_QUOTE_ITEM_PRICE_VALUE
                attr: $.message.order.quote.price.value
                _RETURN_: attr are present     



          - _NAME_: ENUM_QUOTE
            _RETURN_:  
              - _NAME_: ENUM_QUOTE_TITLE
                attr: $.message.order.quote.breakup[*].title
                enumList:
                  - BASE_FARE
                  - DISTANCE_FARE
                  - ADD_ONS
                  - CANCELLATION_CHARGES
                  - REFUND
                _RETURN_: attr all in enumList

    init:
      - _NAME_: INIT_CONTEXT
        action:
          - init
        domain: ONDC:TRV10
        version: "2.1.0"
        _RETURN_: *CONTEXT_COMMON 

      - _NAME_: REQUIRED_BILLING
        action: init
        _RETURN: &REQUIRED_COMMON_BILLING_NAME
          - NAME_: REQUIRED_BILLING_NAME
            attr:  $.message.order.billing.name
            _RETURN: attr are present  

      - _NAME_: INIT_FULFILLMENT 
        action:
          - init
        _RETURN_: &REQUIRED_ACTION_FULFILLMENTS
          - _NAME_: REQUIRED_INIT_FULFILLMENT_1
            action: 
              - init
            _RETURN_: &COMMON_ACTION_FULFILLMENTS
              - *COMMON_ON_ACTION_REQUIRED_FULFILLMENT
              - _NAME_: REQUIRED_ITEMS_CUSTOMER_PHONE
                attr: $.message.order.fulfillments[*].customer.contact.phone
                _RETURN_: attr are present

              - _NAME_: REQUIRED_ITEMS_CUSTOMER_NAME
                attr: $.message.order.fulfillments[*].customer.person.name
                _RETURN_: attr are present  
                        
                
          - _NAME_: VALID_ENUMS_ON_SELECT_FULFILLMENT
            action: on_search 
            _RETURN_: *COMMON_ON_ACTION_ENUM_FULFILLMENT
         
      - _NAME_: INIT_ITEMS
        action: 
          - init
        _RETURN_: *COMMON_ACTION_ITEM

      - _NAME_: INIT_PROVIDER
        action: 
          - init
        _RETURN_: *COMMON_ACTION_PROVIDER  

      - _NAME_: REQUIRED_PAYMENTS
        action: 
          - init
        _RETURN_: &COMMON_ACTION_PAYMENTS
          - _NAME_: REQUIRED_INIT_PAYMENTS
            _RETURN_: &REQUIRED_ACTION_PAYMENTS
              - _NAME_: REQUIRED_PAYMENT_COLLECTED_BY
                attr: $.message.order.payments[*].collected_by
                _RETURN_: attr are present

              - _NAME_: REQUIRED_PAYMENT_STATUS
                attr: $.message.order.payments[*].status
                _RETURN_: attr are present
              - _NAME_: REQUIRED_PAYMENT_STATUS
                attr: $.message.order.payments[*].type
                _RETURN_: attr are present    


          - _NAME_: VALID_ENUMS_INIT_PAYMENTS
            _RETURN_: &VALID_ENUM_PAYMENTS
              - _NAME_: ENUM_PAYMENT_COLLECTED_BY
                attr: $.message.order.payments[*].collected_by
                enumList:
                  - BPP
                  - BAP
                _RETURN_: attr any in enumList
              - _NAME_: REQUIRED_PAYMENT_STATUS
                attr: $.message.order.payments[*].status
                enumList:
                  - NOT-PAID
                  - PAID
                _RETURN_: attr any in enumList

              - _NAME_: REQUIRED_PAYMENT_STATUS
                attr: $.message.order.payments[*].type  
                enumList:
                  enumList:
                    - PRE-ORDER
                    - ON-ORDER
                    - ON-FULFILLMENT
                _RETURN_: attr any in enumList    

      - _NAME_: INIT_BAP_TAGS
        _RETURN: &COMMON_BAP_TAGS
          - _NAME: REQUIRED_PAYMENT_TAGS
            validTags:
              - BAP_TERMS
            tagPath: $.message.order.tags[*].descriptor.code
            _RETURN_: tagPath all in validTags
  
          - _NAME_: REQUIRED_PAYMENT_TAG_BAP_TERMS
            _SCOPE_: $.message.order.tags[?(@.descriptor.code=='BAP_TERMS')]
            subTags: $.list[*].descriptor.code
            validValues:
              - BUYER_FINDER_FEES_PERCENTAGE
              - SETTLEMENT_WINDOW
              - SETTLEMENT_BASIS
              - SETTLEMENT_TYPE
              - SETTLEMENT_AMOUNT
              - MANDATORY_ARBITRATION
              - COURT_JURISDICTION
              - DELAY_INTEREST
              - STATIC_TERMS
              - SETTLEMENT_BANK_CODE
              - SETTLEMENT_BANK_ACCOUNT_NUMBER
              - SETTLEMENT_VIRTUAL_PAYMENT_ADDRESS
            _CONTINUE_: "!(subTags are present)"
            _RETURN_: subTags all in validValues            
                
    on_init:
      - _NAME_: ON_INIT_CONTEXT
        action:
          - on_init
        domain: ONDC:TRV10
        version: "2.1.0"
        _RETURN_: *CONTEXT_COMMON

      - _NAME_: ON_INIT_FULFILLMENT 
        action: 
          - on_init
        _RETURN_: &COMMON_ON_REQUIRED_ACTION_FULFILLMENTS
          - _NAME_: REQUIRED_ON_INIT_FULFILLMENT_1
            action: 
              - on_init
            _RETURN_: *COMMON_ACTION_FULFILLMENTS

          - _NAME_: VALID_ENUMS_ON_SELECT_FULFILLMENT
            action:
              - on_init 
            _RETURN_: *COMMON_ON_ACTION_ENUM_FULFILLMENT

          - _NAME_: ON_INIT_FULFILLMENT_TAGS
            action:
              - on_init
            _RETRUN_: *COMMON_FULFILLMENT_TAGS    

      - _NAME_: ON_INIT_ITEMS 
        action:
          - on_init
        _RETURN_: &REQUIRED_COMMON_ITEMS
          - _NAME_: REQUIRED_ON_INIT_ITEMS
            _RETURN_: 
              - *COMMON_REQUIRED_ITEMS
              - _NAME_: REQUIRED_ITEMS_PAYMENTS_ID
                attr: $.message.order.items[*].payment_ids[*]
                _RETURN_: attr are present

              #check payment_id is same 
              - _NAME_: CHECK_ITEMS_PAYMENTS_ID
                attr: $.message.order.items[*].payment_ids[*]
                usecasepath: $.message.order.payments[*].id
                _CONTINUE_: (attr equal to usecasepath)
                _RETURN_: attr are present

              - _NAME_: ENUM_ON_SEARCH_ITEMS
                _RETURN_:  *COMMON_VALID_ENUMS 

              - _NAME_: ON_SELECT_ITEM_TAGS
                action:
                  - on_init
                _RETRUN_: *COMMON_ITEM_TAGS   

      - _NAME_: REQUIRED_PAYMENTS
        action: 
          - on_init
        _RETURN_: &COMMON_ON_ACTION_PAYMENTS
          - _NAME_: REQUIRED_ON_INIT_PAYMENTS
            _RETURN_: 
              - *REQUIRED_ACTION_PAYMENTS
              - _NAME_: REQUIRED_PAYMENT_ID
                attr: $.message.order.payments[*].id
                _RETURN_: attr are present

              - _NAME_: VALID_ENUMS_ON_INIT_PAYMENTS
                _RETURN_: *VALID_ENUM_PAYMENTS  

      - _NAME_: ON_INIT_PROVIDER
        action: 
          - on_init
        _RETURN_: *COMMON_ACTION_PROVIDER

      - _NAME_: ON_INIT_QUOTE
        action: on_init
        _RETURN_: *COMMON_ON_ACTION_QUOTE   

      - _NAME_: ON_INIT_PAYMENTS_TAGS
        action: 
          - on_init
        _RETURN_: &COMMON_BPP_TERMS
          - _NAME: PAYMENT_TAG_GROUP
            validTags:
              - BPP_TERMS
            tagPath: $.message.order.tags[*].descriptor.code
            _RETURN_: tagPath all in validTags 

          - _NAME_: REQUIRED_PAYMENT_TAG_BAP_TERMS
            _SCOPE_: $.message.order.tags[*][?(@.descriptor.code=='BPP_TERMS')]
            subTags: $.list[*].descriptor.code
            validValues:
              - BUYER_FINDER_FEES_PERCENTAGE
              - SETTLEMENT_WINDOW
              - SETTLEMENT_BASIS
              - SETTLEMENT_TYPE
              - MANDATORY_ARBITRATION
              - COURT_JURISDICTION
              - DELAY_INTEREST
              - STATIC_TERMS
              - SETTLEMENT_AMOUNT
            _CONTINUE_: "!(subTags are present)"
            _RETURN_: subTags all in validValues     
      

    confirm:
      - _NAME_: CONFIRM_CONTEXT
        action:
          - confirm
        domain: ONDC:TRV10
        version: "2.1.0"
        _RETURN_: *CONTEXT_COMMON

      - _NAME_: REQUIRED_BILLING
        action: 
          - confirm
        _RETURN: *REQUIRED_COMMON_BILLING_NAME

      - _NAME_: CONFIRM_FULFILLMENT 
        action:
          - confirm
        _RETURN_: *REQUIRED_ACTION_FULFILLMENTS

      - _NAME_: CONFIRM_ITEMS
        action: 
          - confirm
        _RETURN_: *COMMON_ACTION_ITEM

      - _NAME_: CONFIRM_PROVIDER
        action: 
          - confirm
        _RETURN_: *COMMON_ACTION_PROVIDER

      - _NAME_: REQUIRED_PAYMENTS
        action: 
          - confirm
        _RETURN_: *COMMON_ON_ACTION_PAYMENTS

      - _NAME_: BAP_BPP_TERMS_TAGS
        action: 
          - confirm
        _RETURN_: &COMMON_BAP_BPP_TERMS_TAGS
          - _NAME_: CONFIRM_BAP_TAGS
            _RETURN: &COMMON_BAP_TAGS
          - _NAME_: CONFIRM_BPP_TAGS
            _RETURN_: *COMMON_BPP_TERMS  
      
    on_confirm:
      - _NAME_: ON_CONFIRM_CONTEXT
        action:
          - on_confirm
        domain: ONDC:TRV10
        version: "2.1.0"
        _RETURN_: *CONTEXT_COMMON

      
    
      - _NAME_: ON_CONFIRM_FULFILLMENT_1 
        action: 
          - on_confirm
        _RETURN_: *COMMON_ON_REQUIRED_ACTION_FULFILLMENTS

      - &ON_CONFIRM_FULFILLMENT_2
        _NAME_: ON_CONFIRM_FULFILLMENT_2 
        action: 
          - on_confirm
        attr: $.message.order.fulfillments[*].state.descriptor.code
        usecasepath: $.message.order.fulfillments[*].type
        var_state_1: ['RIDE_CONFIRMED']
        var_type: ['SELF_PICKUP']
        _CONTINUE_: "!((var_state equal to attr) && (usecasepath equal to var_type))"
        _RETURN_:
          - _NAME_: REQUIRED_FULFILLMENT_DETAILS
            _RETURN_: 
              - _NAME_: REQUIRED_AUTH_TOKEN
                attr:  $.message.order.fulfillments[*].stops[*].authorization.token
                _RETURN_: attr are present

              - _NAME_: REQUIRED_AUTH_TYPE
                attr:  $.message.order.fulfillments[*].stops[*].authorization.type
                _RETURN_: attr are present

              - _NAME_: REQUIRED_AUTH_VALID_TO
                attr:  $.message.order.fulfillments[*].stops[*].authorization.valid_to
                _RETURN_: attr are present

              - _NAME_: REQUIRED_AUTH_STATUS
                attr:  $.message.order.fulfillments[*].stops[*].authorization.status
                _RETURN_: attr are present

          - _NAME_: VALID_ENUM_FULFILLMENT_DETAILS
            _RETURN_: 
              - _NAME_: REQUIRED_AUTH_TYPE
                attr:  $.message.order.fulfillments[*].stops[*].authorization.type
                enumList:
                  - OTP
                  - QR
                _RETURN_: attr any in enumList

              - _NAME_: REQUIRED_AUTH_STATUS
                attr:  $.message.order.fulfillments[*].stops[*].authorization.status
                enumList:
                  - UNCLAIMED
                  - CLAIMED
                _RETURN_: attr any in enumList  

      - &ON_CONFIRM_FULFILLMENT_3
        _NAME_: ON_CONFIRM_FULFILLMENT_3 
        action:
          - on_confirm
        attr: $.message.order.fulfillments[*].state.descriptor.code
        usecasepath: $.message.order.fulfillments[*].type
        var_state: ['RIDE_ASSIGNED']
        _CONTINUE_: "!(var_state equal to attr)"
        _RETURN_:
          - _NAME_: REQUIRED_FULFILLMENT_DETAILS
            _RETURN_: 
              - _NAME_: REQUIRED_AUTH_TOKEN
                attr:  $.message.order.fulfillments[*].stops[*].authorization.token
                _RETURN_: attr are present

              - _NAME_: REQUIRED_AUTH_TYPE
                attr:  $.message.order.fulfillments[*].stops[*].authorization.type
                _RETURN_: attr are present

              - _NAME_: REQUIRED_AUTH_VALID_TO
                attr:  $.message.order.fulfillments[*].stops[*].authorization.valid_to
                _RETURN_: attr are present

              - _NAME_: REQUIRED_AUTH_STATUS
                attr:  $.message.order.fulfillments[*].stops[*].authorization.status
                _RETURN_: attr are present

              - _NAME_: REQUIRED_AGENT_PHONE
                attr:  $.message.order.fulfillments[*].agent.contact.phone
                _RETURN_: attr are present

              - _NAME_: REQUIRED_AGENT_NAME
                attr:  $.message.order.fulfillments[*].agent.person.name
                _RETURN_: attr are present  

              - _NAME_: REQUIRED_FULFILLMENT_STATE
                attr:  $.message.order.fulfillments[*].state.descriptor.code
                _RETURN_: attr are present

              - _NAME_: REQUIRED_FULFILLMENT_STATE
                attr:  $.message.order.fulfillments[*].state.descriptor.code
                _RETURN_: attr are present

          - _NAME_: VALID_ENUM_FULFILLMENT_DETAILS
            _RETURN_: 
              - _NAME_: REQUIRED_AUTH_TYPE
                attr:  $.message.order.fulfillments[*].stops[*].authorization.type
                enumList:
                  - OTP
                  - QR
                _RETURN_: attr any in enumList

              - _NAME_: REQUIRED_AUTH_STATUS
                attr:  $.message.order.fulfillments[*].stops[*].authorization.status
                enumList:
                  - UNCLAIMED
                  - CLAIMED
                _RETURN_: attr any in enumList

              - _NAME_: VALID_FULFILLMENT_STATE
                attr: $.message.order.fulfillments[*].state.descriptor.code
                enumList:
                  - RIDE_CANCELLED
                  - RIDE_ENDED
                  - RIDE_STARTED
                  - RIDE_ASSIGNED
                  - RIDE_ENROUTE_PICKUP
                  - RIDE_ARRIVED_PICKUP
                  - RIDE_CONFIRMED

                _RETURN_: attr any in enumList    
  
      
                


        #add checks on fulfillment states

      - &ON_CONFIRM_ORDER
        _NAME_: ON_CONFIRM_ORDER
        action:
          - on_confirm
        _RETURN_:
          - _NAME_: REQUIRED_ON_CONFIRM_ORDER
            _RETURN_:
              - _NAME_: REQUIRED_ORDER_ID
                attr: $.message.order.id
                _RETURN_: attr are present

              - _NAME_: REQUIRED_ORDER_STATUS
                attr: $.message.order.status
                _RETURN_: attr are present

              - _NAME_: REQUIRED_ON_CONFIRM_CREATED_AT
                attr: $.message.order.created_at
                _RETURN_: attr are present

              - _NAME_: REQUIRED_ON_CONFIRM_UPDATED_AT
                attr: $.message.order.updated_at
                _RETURN_: attr are present    

          - _NAME_: VALID_ENUM_ON_CONFIRM_ORDER
            _RETURN_: 
              - _NAME_: VALID_ENUM_ORDER_STATUS
                attr: $.message.order.status
                enumList:
                  - UPDATED
                  - SOFT_CANCEL
                  - CONFIRM_CANCEL
                  - ACTIVE
                  - COMPLETE
                  - CANCELLED
                  - CONFIRM_UPDATE
                  - SOFT_UPDATE
                _RETURN_: attr any in enumList  
              
              
              - _NAME_: REGEX_ON_CONFIRM_CREATED_AT
                attr: $.message.order.created_at
                reg: ['^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\.\\d{3}Z$']
                _RETURN_: attr follow regex reg 

              - _NAME_: REGEX_ON_CONFIRM_UPDATED_AT
                attr: $.message.order.updated_at
                reg: ['^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\.\\d{3}Z$']
                _RETURN_: attr follow regex reg    

      - _NAME_: ON_CONFIRM_QUOTE
        action: 
          - on_confirm
        _RETURN_: *COMMON_ON_ACTION_QUOTE 

      - _NAME_: ON_CONFIRM_REQUIRED_PAYMENTS
        action: 
          - on_confirm
        _RETURN_: *COMMON_ON_ACTION_PAYMENTS

      - _NAME_: BAP_BPP_TERMS_TAGS
        action: 
          - on_confirm
        _RETURN_: *COMMON_BAP_BPP_TERMS_TAGS

      - _NAME_: ON_CONFIRM_PROVIDER
        action: 
          - on_confirm
        _RETURN_: *COMMON_ACTION_PROVIDER

      - _NAME_: ON_CONFIRM_ITEMS 
        action:
          - on_confirm
        _RETURN_: &REQUIRED_COMMON_ITEMS       

    status:
      - _NAME_: STATUS_CONTEXT
        action:
          - status
        domain: ONDC:TRV10
        version: "2.1.0"
        _RETURN_: *CONTEXT_COMMON

      - _NAME_: REQUIRED_ORDER_ID
        domain: ONDC:TRV10
        version: "2.1.0
        action:
          - status
        attr: $.message.order_id
        _RETURN_: attr are present

    on_status:
      - _NAME_: ON_STATUS_CONTEXT
        action:
          - on_status
        domain: ONDC:TRV10
        version: "2.1.0"
        _RETURN_: *CONTEXT_COMMON

      - _NAME_: ON_CONFIRM_FULFILLMENT_1 
        action: 
          - on_confirm
        _RETURN_: *COMMON_ON_REQUIRED_ACTION_FULFILLMENTS
      
      - &ON_CONFIRM_FULFILLMENT_2
      - &ON_CONFIRM_FULFILLMENT_3
      
      - _NAME_: ON_STATUS_QUOTE
        action: 
          - on_status
        _RETURN_: *COMMON_ON_ACTION_QUOTE

      - _NAME_: ON_STATUS_REQUIRED_PAYMENTS
        action: 
          - on_status
        _RETURN_: *COMMON_ON_ACTION_PAYMENTS

      - _NAME_: BAP_BPP_TERMS_TAGS
        action: 
          - on_status
        _RETURN_: *COMMON_BAP_BPP_TERMS_TAGS

      - _NAME_: ON_STATUS_PROVIDER
        action: 
          - on_status
        _RETURN_: *COMMON_ACTION_PROVIDER

      - _NAME_: ON_STATUS_ITEMS 
        action:
          - on_status
        _RETURN_: &REQUIRED_COMMON_ITEMS     

      - _NAME_: ON_STATUS_ORDER_1
        action:
          - on_status
        _RETURN_: &COMMON_ORDER_ATRIBUTES
          - _NAME_: REQUIRED_ON_CONFIRM_ORDER
            _RETURN_:
              - _NAME_: REQUIRED_ORDER_ID
                attr: $.message.order.id
                _RETURN_: attr are present

              - _NAME_: REQUIRED_ORDER_STATUS
                attr: $.message.order.status
                _RETURN_: attr are present

              - _NAME_: REQUIRED_ON_CONFIRM_CREATED_AT
                attr: $.message.order.created_at
                _RETURN_: attr are present

              - _NAME_: REQUIRED_ON_CONFIRM_UPDATED_AT
                attr: $.message.order.updated_at
                _RETURN_: attr are present    

          - _NAME_: VALID_ENUM_ON_CONFIRM_ORDER
            _RETURN_: 
              - _NAME_: VALID_ENUM_ORDER_STATUS
                attr: $.message.order.status
                enumList:
                  - UPDATED
                  - SOFT_CANCEL
                  - CONFIRM_CANCEL
                  - ACTIVE
                  - COMPLETE
                  - CANCELLED
                  - CONFIRM_UPDATE
                  - SOFT_UPDATE
                _RETURN_: attr any in enumList  
              
              
              - _NAME_: REGEX_ON_CONFIRM_CREATED_AT
                attr: $.message.order.created_at
                reg: ['^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\.\\d{3}Z$']
                _RETURN_: attr follow regex reg 

              - _NAME_: REGEX_ON_CONFIRM_UPDATED_AT
                attr: $.message.order.updated_at
                reg: ['^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\.\\d{3}Z$']
                _RETURN_: attr follow regex reg    

      - _NAME_: ON_STATUS_ORDER_2
        attr: $.message.order.status
        var_status: ['COMPLETED']
        _CONTINUE_: (var_status equal to attr)
        action:
          - on_status
        _RETURN_: 
          - _NAME_: REQUIRED_PAYMENT_STATUS
            attr: $.message.order.payments[*].status
            var_status: ['PAID']
            _CONTINUE_: !(var_status equal to attr)
            _RETURN_: attr are present

          - _NAME_: REQUIRED_PAYMENT_STATUS
            attr: $.message.order.payments[*].params.amount
            _RETURN_: attr are present

    cancel:
      - _NAME_: CANCEL_CONTEXT
        action:
          - cancel
        domain: ONDC:TRV10
        version: "2.1.0"
        _RETURN_: *CONTEXT_COMMON

      - _NAME_: CANCEL_MESSAGE
        action:
          - on_cancel
        _RETURN_:
          - NAME_: REQUIRED_CANCELLATION_ID
            attr: $.message.cancellation_reason_id
            _RETURN_: attr are present

          - NAME_: REQUIRED_CANCELLATION_CODE
            attr: $.message.descriptor.code
            _RETURN_: attr are present

          - NAME_: REQUIRED_CANCELLATION_NAME
            attr: $.message.descriptor.name
            _RETURN_: attr are present

          - NAME_: REQUIRED_ORDER_ID
            attr: $.message.order_id
            _RETURN_: attr are present

          - NAME_: VALID_CANCELLATION_DESCRIPTOR_CODE
            attr: $.message.descriptor.code
            enumList: 
              - SOFT_CANCEL
              - CONFIRM_CANCEL
            _RETURN_: attr any in enumList

          - NAME_: VALID_CANCELLATION_REASON_ID
            attr: $.message.cancellation_reason_id
            enumList:
              - "000"
              - "001"
              - "002"
              - "003"
              - "004"
              - "005"
              - "011"
              - "012"
              - "013"
              - "014"  
            _RETURN_: attr any in enumList 

    on_cancel:
      - _NAME_: ON_CANCEL_CONTEXT
        action:
          - on_cancel
        domain: ONDC:TRV10
        version: "2.1.0"
        _RETURN_: *CONTEXT_COMMON

      - _NAME_: ON_CANCEL_FULFILLMENT_1 
        action: 
          - on_cancel
        _RETURN_: *COMMON_ON_REQUIRED_ACTION_FULFILLMENTS

      - &ON_CONFIRM_FULFILLMENT_2
      - &ON_CONFIRM_FULFILLMENT_3

      - _NAME_: ON_CANCEL_QUOTE
        action: 
          - on_cancel
        _RETURN_: *COMMON_ON_ACTION_QUOTE

      - _NAME_: ON_CANCEL_REQUIRED_PAYMENTS
        action: 
          - on_cancel
        _RETURN_: *COMMON_ON_ACTION_PAYMENTS

      - _NAME_: BAP_BPP_TERMS_TAGS
        action: 
          - on_cancel
        _RETURN_: *COMMON_BAP_BPP_TERMS_TAGS

      - _NAME_: ON_CANCEL_PROVIDER
        action: 
          - on_cancel
        _RETURN_: *COMMON_ACTION_PROVIDER

      - _NAME_: ON_CANCEL_ITEMS 
        action:
          - on_cancel
        _RETURN_: &REQUIRED_COMMON_ITEMS

      - _NAME_: ON_CANCEL_ORDER_1
        action:
          - on_cancel
        _RETURN_: *COMMON_ORDER_ATRIBUTES

      - _NAME_: ON_CANCEL_CANCELLATION
        action:
          - on_cancel
        _RETURN_: 
          - _NAME_: REQUIRED_CANCELLED_BY
            attr: $.message.order.cancellation.cancelled_by
            _RETURN: attr are present

          - _NAME_: REQUIRED_REASON_BY
            attr: $.message.order.cancellation.reason.descriptor.code
            _RETURN: attr are present

          - NAME_: VALID_ENUM_REQUIRED_CANCELLED_BY
            attr: $.message.descriptor.code
            enumList: 
              - CONSUMER
              - PROVIDER
            _RETURN_: attr any in enumList

          - NAME_: VALID_ENUM_CANCELLATION_REASON_ID
            attr: $.message.order.cancellation.reason.descriptor.code
            enumList:
              - "000"
              - "001"
              - "002"
              - "003"
              - "004"
              - "005"
              - "011"
              - "012"
              - "013"
              - "014"  
            _RETURN_: attr any in enumList  
                 
    update:
      - _NAME_: UPDATE_CONTEXT
        action:
          - update
        domain: ONDC:TRV10
        version: "2.1.0"
        _RETURN_: *CONTEXT_COMMON

      - _NAME_: REQUIRED_ORDER_VALUES
        action: update
        _RETURN_: 
          - _NAME_: REQUIRED_UPDATE_TARGET
            attr: $.message.update_target
            _RETURN_: attr are present 

          - _NAME_: REQUIRED_ORDER_ID
            attr: $.message.order.id
            _RETURN_: attr are present

      - _NAME_: ORDER_STATUS
        attr: $.message.order.status
        var_status_1: 
          - SOFT_UPDATE
        var_status_2: 
          - CONFIRM_UPDATE
        _CONTINUE_: "!(var_status_1 equal to attr || var_status_2 equal to attr)"
        _RETURN_:
          - _NAME_: REQUIRED_FULFILLMENTS
            _RETURN_: 
              - _NAME_: REQUIRED_FULFILLMENT_ID
                attr: $.message.order.fulfillments[*].id
                _RETURN_: attr are present

              - _NAME_: REQUIRED_FULFILLMENT_LOCATION
                attr: $.message.order.fulfillments[*].stops[*].location.gps
                _RETURN_: attr are present

              - _NAME_: REQUIRED_FULFILLMENT_TYPE
                attr: $.message.order.fulfillments[*].stops[*].type
                _RETURN_: attr are present 

              - _NAME_: REQUIRED_FULFILLMENT_STOPS_ID
                attr: $.message.order.fulfillments[*].stops[*].id
                _RETURN_: attr are present

              - _NAME_: REQUIRED_FULFILLMENT_PARENT_STOP_ID
                attr: $.message.order.fulfillments[*].stops[*].parent_stop_id
                _RETURN_: attr are present         

          - _NAME_: VALID_ENUM_FULFILLMENTS  
            _RETURN_:
              - _NAME_: REQUIRED_FULFILLMENT_TYPE
                attr: $.message.order.fulfillments[*].stops[*].type
                enumList:
                  - START
                  - END
                  - INTERMEDIATE_STOP
                _RETURN_: attr any in enumList 


    on_update:
      - _NAME_: UPDATE_CONTEXT
        action:
          - on_update
        domain: ONDC:TRV10
        version: "2.1.0"
        _RETURN_: *CONTEXT_COMMON

      - _NAME_: ON_CONFIRM_FULFILLMENT_1 
        action: 
          - on_update
        _RETURN_: *COMMON_ON_REQUIRED_ACTION_FULFILLMENTS
      
      - &ON_CONFIRM_FULFILLMENT_2
      - &ON_CONFIRM_FULFILLMENT_3
      
      - _NAME_: ON_STATUS_QUOTE
        action: 
          - on_update
        _RETURN_: *COMMON_ON_ACTION_QUOTE

      - _NAME_: ON_STATUS_REQUIRED_PAYMENTS
        action: 
          - on_update
        _RETURN_: *COMMON_ON_ACTION_PAYMENTS

      - _NAME_: BAP_BPP_TERMS_TAGS
        action: 
          - on_update
        _RETURN_: *COMMON_BAP_BPP_TERMS_TAGS

      - _NAME_: ON_STATUS_PROVIDER
        action: 
          - on_update
        _RETURN_: *COMMON_ACTION_PROVIDER

      - _NAME_: ON_STATUS_ITEMS 
        action:
          - on_update
        _RETURN_: &REQUIRED_COMMON_ITEMS     

      - _NAME_: ON_STATUS_ORDER_1
        action:
          - on_update
        _RETURN_: &COMMON_ORDER_ATRIBUTES
          - _NAME_: REQUIRED_ON_CONFIRM_ORDER
            _RETURN_:
              - _NAME_: REQUIRED_ORDER_ID
                attr: $.message.order.id
                _RETURN_: attr are present

              - _NAME_: REQUIRED_ORDER_STATUS
                attr: $.message.order.status
                _RETURN_: attr are present

              - _NAME_: REQUIRED_ON_CONFIRM_CREATED_AT
                attr: $.message.order.created_at
                _RETURN_: attr are present

              - _NAME_: REQUIRED_ON_CONFIRM_UPDATED_AT
                attr: $.message.order.updated_at
                _RETURN_: attr are present    

          - _NAME_: VALID_ENUM_ON_CONFIRM_ORDER
            _RETURN_: 
              - _NAME_: VALID_ENUM_ORDER_STATUS
                attr: $.message.order.status
                enumList:
                  - UPDATED
                  - SOFT_CANCEL
                  - CONFIRM_CANCEL
                  - ACTIVE
                  - COMPLETE
                  - CANCELLED
                  - CONFIRM_UPDATE
                  - SOFT_UPDATE
                _RETURN_: attr any in enumList  
              
              
              - _NAME_: REGEX_ON_CONFIRM_CREATED_AT
                attr: $.message.order.created_at
                reg: ['^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\.\\d{3}Z$']
                _RETURN_: attr follow regex reg 

              - _NAME_: REGEX_ON_CONFIRM_UPDATED_AT
                attr: $.message.order.updated_at
                reg: ['^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\.\\d{3}Z$']
                _RETURN_: attr follow regex reg    

      - _NAME_: ON_STATUS_ORDER_2
        attr: $.message.order.status
        var_status: ['COMPLETED']
        _CONTINUE_: (var_status equal to attr)
        action:
          - on_status
        _RETURN_: 
          - _NAME_: REQUIRED_PAYMENT_STATUS
            attr: $.message.order.payments[*].status
            var_status: ['PAID']
            _CONTINUE_: !(var_status equal to attr)
            _RETURN_: attr are present

          - _NAME_: REQUIRED_PAYMENT_STATUS
            attr: $.message.order.payments[*].params.amount
            _RETURN_: attr are present
 


               












